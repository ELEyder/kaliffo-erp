import{d as c,c as i,h as l}from"./moment-64TmN0UP.js";import{a as n}from"./apiClient-DNqqoRi2.js";c.extend(i);const d={ventas:1,talleres:2,miscelaneos:3,costureros:4},m=async(e,a)=>{const r=d[e];let t={nombre:a.nombre,ap_paterno:a.ap_paterno,ap_materno:a.ap_materno,fecha_nacimiento:a.fecha_nacimiento.format("YYYY-MM-DD"),dni:a.dni,telefono:a.telefono,sueldo:a.sueldo,rol:r};r===1&&(t={...t,tienda_id:a.tienda_id});try{await n.post("/Trabajador/create",t)}catch{console.log("Error al aÃ±adir el Trabajador")}},f=async(e,a)=>{try{const r=await n.get(`/trabajador/${e}`);a(r.data)}catch(r){console.log("Error al obtener el Trabajador",r)}},j=async(e,a,r)=>{a.fecha_nacimientoE&&(a.fecha_nacimientoE=l(a.fecha_nacimientoE).format("YYYY-MM-DD"));const t=Object.keys(a).reduce((o,s)=>(a[s]!==r[s]&&a[s]!==void 0&&(o[s]=a[s]),o),{});try{await n.put(`/Trabajador/update/${e}`,t)}catch(o){console.error("Error al actualizar el Trabajador",o)}},_=async(e,a)=>{try{const t=(await n.get(`/trabajador?rol=${d[e]}`)).data;t.forEach(o=>{typeof o=="object"&&o!==null?o.tienda_id===null&&(o.tienda_id=0,o.tienda="Sin asignar"):console.warn("Elemento no es un objeto:",o)}),a(t)}catch(r){console.log("Error al obtener los Trabajadors",r)}},T=async(e,a)=>{try{const r=await n.get(`/Trabajador?rol=1&antiTienda_id=${e}`);a(r.data)}catch(r){console.log("Error al obtener los Trabajadores",r)}},h=async(e,a)=>{try{await n.put(`/Trabajador/update/${a.personal}`,{tienda_id:e}),console.log("Trabajador actualizado exitosamente")}catch(r){console.log("Error al actualizar Trabajador",r)}},g=async(e,a,r)=>{try{const o=(await n.get(`/trabajador/${e}`)).data;r(o),a.setFieldsValue({nombre:o.nombre,ap_paterno:o.ap_paterno,ap_materno:o.ap_materno,telefono:o.telefono,dni:o.dni,fecha_nacimiento:c(o.fecha_nacimiento,"DD-MM-YYYY"),tienda_id:o.tienda_id})}catch(t){console.log("Error al obtener los detalles del Trabajador",t)}};export{m as a,T as b,j as c,_ as d,f as g,g as s,h as u};
