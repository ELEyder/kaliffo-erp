import{j as e,r as u,e as D,N as C}from"./index-DnZSuapv.js";import{T as M}from"./Tabla-BwLH4X_R.js";import{a as k}from"./apiClient-DNqqoRi2.js";import{F as P}from"./index-BjGP48R2.js";import{B as g}from"./button-DxAvYtf7.js";import{P as q}from"./index-BRImeMB9.js";import{A}from"./AddIncidenciaModal-DO1AlUcS.js";import{U as _}from"./UpdateTrabajadorModal-BdvowKqT.js";import{p,o as j,a as h,b as y,c as I,d as v,e as F}from"./Tools-BXmtYGau.js";import{a as R}from"./Usuario-BLIord41.js";import{g as S}from"./Tienda-DchRzPO6.js";import{F as n}from"./index-eEjfzd7p.js";import{M as K}from"./index-CQoRxuqN.js";import{I as c}from"./index-CfhjOVlK.js";import{R as x,C as m}from"./row-Bgu54Vpq.js";import{D as Y}from"./index-CuAlWmBO.js";import{S as E}from"./index-CAw0ik1A.js";import{D as $}from"./index-DnZuPcqL.js";import{F as L}from"./index-CRStyn0e.js";import"./Table-UylViyS0.js";import"./useMergedState-xnIRtK6W.js";import"./useSize-DL9WfM8p.js";import"./styleChecker-BPMTEHVB.js";import"./EllipsisOutlined-BC2kcC9O.js";import"./addEventListener-BGVn8IVC.js";import"./DownOutlined-DfCZxesi.js";import"./index-nq-gG-E2.js";import"./ContextIsolator-X51Zuf7C.js";import"./LeftOutlined-DUJeaJ5E.js";import"./index-OoAlQgr1.js";import"./responsiveObserver-P31G7zPC.js";import"./index-8gkIUhhz.js";import"./index-BsZC5oSy.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-DvbmuEp_.js";import"./useBreakpoint-CHVb293n.js";import"./TextArea-D6coABml.js";import"./ActionButton-HZPJWirw.js";import"./moment-64TmN0UP.js";import"./Skeleton-C8RXkADb.js";import"./EyeOutlined-Dgph3YEA.js";import"./CheckOutlined-CxFn5oU1.js";const B={ventas:1,talleres:2,miscelaneos:3,costureros:4},O=(l,o,t,i)=>{const d=[{title:"Nombre",key:"nombre",align:"center",render:a=>`${a.nombre} ${a.ap_paterno} ${a.ap_materno}`},{title:"DNI",dataIndex:"dni",key:"dni",align:"center",sorter:(a,r)=>a.dni.localeCompare(r.dni)},{title:"Teléfono",dataIndex:"telefono",key:"telefono",align:"center",sorter:(a,r)=>a.telefono.localeCompare(r.telefono)},{title:"Incidencias",dataIndex:"total_incidencias",key:"total_incidencias",align:"center",sorter:(a,r)=>a.total_incidencias-r.total_incidencias},{title:"Sueldo",dataIndex:"sueldo",key:"sueldo",align:"center",sorter:(a,r)=>a.sueldo-r.sueldo}];return l==="ventas"&&d.splice(3,0,{title:"Tienda",dataIndex:"tienda",key:"tienda",align:"center"}),d.push({title:"Opciones",dataIndex:"trabajador_id",key:"trabajador_id",align:"center",render:a=>e.jsxs(P,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:[e.jsx(g,{type:"primary",onClick:r=>{r.stopPropagation(),t(a),o("updT",!0)},children:"Editar"}),e.jsx(g,{onClick:r=>{r.stopPropagation(),t(a),o("addI",!0)},children:"+ Incidencia"}),e.jsx(q,{title:"¿ELIMINAR?",description:"¿Estás seguro de eliminar este usuario?",okText:"Confirmar",cancelText:"Cancelar",onConfirm:async r=>{r.stopPropagation(),await k.delete(`/Trabajador/delete/${a}`),i()},children:e.jsx(g,{type:"primary",danger:!0,onClick:r=>r.stopPropagation(),children:"Eliminar"})})]})}),d},U=l=>`/trabajador?rol=${B[l]}`,z=({openModal:l,closeModal:o,tipoTrabajador:t,reload:i,setReload:d})=>{const[a]=n.useForm(),[r,f]=u.useState([]);return u.useEffect(()=>{t==="ventas"&&S(f)},[t]),e.jsx(K,{forceRender:!0,getContainer:!1,styles:{header:{textTransform:"uppercase",textAlign:"center"},body:{height:"430px"}},title:`Añadir Nuevo Trabajador a ${t}`,open:l,onCancel:o,okText:"Añadir",onOk:a.submit,centered:!0,children:e.jsxs(n,{autoComplete:"false",style:{maxWidth:500,margin:"0 auto"},size:"large",form:a,layout:"vertical",labelAlign:"center",id:"formulariocrear",onFinish:async s=>{await R(t,s),i(),o(!1),a.resetFields()},children:[e.jsx(n.Item,{style:{marginTop:20},name:"nombre",label:"Nombres",rules:[{required:!0,message:"Nombres requeridos"}],children:e.jsx(c,{onPaste:p,onKeyDown:j,onInput:h})}),e.jsxs(x,{justify:"space-around",align:"middle",gutter:{xs:8,sm:16,md:24,lg:32},children:[e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(n.Item,{name:"ap_paterno",label:"Apellido Paterno",rules:[{required:!0,message:"Apellido Paterno Requerido"}],children:e.jsx(c,{onPaste:p,onKeyDown:j,onInput:h})})}),e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(n.Item,{name:"ap_materno",label:"Apellido Materno",rules:[{required:!0,message:"Apellido Materno Requerido"}],children:e.jsx(c,{onPaste:p,onKeyDown:j,onInput:h})})})]}),e.jsxs(x,{justify:"space-around",align:"middle",gutter:{xs:8,sm:16,md:24,lg:32},children:[e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(n.Item,{label:"Fecha Nacimiento",name:"fecha_nacimiento",rules:[{required:!0,message:"Fecha Nacimiento requerido"}],children:e.jsx(Y,{placement:"bottomRight",popupStyle:{height:"257px"},placeholder:"DD-MM-YYYY",format:"DD-MM-YYYY"})})}),e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(n.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Telefono Requerido"}],children:e.jsx(c,{showCount:!0,maxLength:9,onPaste:p,onKeyDown:y,onInput:I})})})]}),e.jsxs(x,{justify:"space-around",align:"middle",gutter:{xs:8,sm:16,md:24,lg:32},children:[e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(n.Item,{name:"dni",label:"DNI",rules:[{required:!0,message:"DNI requerido"}],children:e.jsx(c,{showCount:!0,maxLength:8,onPaste:p,onKeyDown:y,onInput:I})})}),e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(n.Item,{name:"sueldo",label:"Sueldo",rules:[{required:!0,message:"Sueldo requerido"}],children:e.jsx(c,{prefix:"S/.",onPaste:p,onKeyDown:v,onInput:F})})})]}),e.jsx(x,{children:e.jsx(m,{children:t==="ventas"&&e.jsx(n.Item,{name:"tienda_id",label:"Tienda Asignada",rules:[{required:!0,message:"Tienda Asignada"}],children:e.jsx(E,{options:r.map(s=>({value:s.tienda_id,label:s.tienda,key:s.tienda_id}))})})})})]})})},Fe=()=>{const l={ventas:1,talleres:2,miscelaneos:3,costureros:4},{tipoTrabajador:o}=D(),[t,i]=u.useState(!0),[d,a]=u.useState(0),[r,f]=u.useState({addT:!1,addI:!1,updT:!1}),s=(T,w)=>{f(N=>({...N,[T]:w}))},b=O(o,s,a,()=>i(!t));return Object.keys(l).includes(o)?e.jsxs(e.Fragment,{children:[e.jsx($,{style:{textTransform:"uppercase"},children:o}),e.jsx(M,{columnas:b,rowKey:"trabajador_id",url:U(o),reload:()=>i(!t)}),e.jsx(L,{tooltip:"Añadir nuevo trabajador",onClick:()=>s("addT",!0)}),e.jsx(z,{openModal:r.addT,closeModal:()=>s("addT",!1),tipoTrabajador:o,reload:()=>i(!t)}),e.jsx(_,{openModal:r.updT,closeModal:()=>s("updT",!1),tipoTrabajador:o,reload:()=>i(!t),id:d}),e.jsx(A,{openModal:r.addI,closeModal:()=>s("addI",!1),reload:()=>i(!t),id:d})]}):e.jsx(C,{to:"/error"})};export{Fe as default};
