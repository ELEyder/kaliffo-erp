import{r as m,j as e,F as i,X as v,S as l,I as c,B as A,c as D}from"./index-Bunp8VmX.js";import{A as y}from"./ApiClient-CwTlTqVt.js";import"./moment-C5S46NFB.js";import{T as I}from"./index-1LFFKiN5.js";import{u as E}from"./useApiRequest-GF_nNgjO.js";import{a as w}from"./MovimientosMercaderia-uXxdKJ4q.js";import{M as O}from"./index-DCZRlB0p.js";import{C as b}from"./index-BD1DMr01.js";import{D as M}from"./index-B_8r9Za8.js";import"./Table-azPtpNCw.js";import"./styleChecker-BYYi54FN.js";import"./index-CWZRQiGq.js";import"./Dropdown-CAg5ab4S.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-CK3_7m1G.js";import"./useBreakpoint-RvYD15SG.js";import"./ActionButton-DynUVMgy.js";import"./index-BkpqA939.js";import"./Skeleton-DQ75DhjH.js";import"./index-B00MmLCC.js";const C=a=>{const{handleRequest:r,loading:x,error:s}=E(a),[o,p]=m.useState([]);return{movimientos:o,loading:x,error:s,getMovimientos:async t=>{t&&await r(async()=>{const n=await y.get(`/movimiento/${t}`);p(n.data)})},addMovimientos:async t=>{const n={nombre:t.nombre,ap_paterno:t.ap_paterno,ap_materno:t.ap_materno,fecha_nacimiento:t.fecha_nacimiento.format("YYYY-MM-DD"),dni:t.dni,telefono:t.telefono,sueldo:t.sueldo,rol:t.rol,tienda_id:t.tienda_id??1};await r(()=>y.post("/movimiento/create",n),"Movimiento agregado")},updateMovimientos:async(t,n)=>{n.tienda_id=n.rol!=1?1:n.rol,console.log(n),await r(()=>y.put(`/movimiento/update/${t}`,n),"Movimiento actualizado")},deleteMovimientos:async t=>{await r(async()=>{await y.delete(`/movimiento/delete/${t}`)},"Movimiento eliminado")}}},T=({openModal:a,closeModal:r,tipo:x,idM:s})=>{var h,u,d,g,t,n,j;const[o,p]=m.useState({});return m.useEffect(()=>{s&&w(p,x,s)},[s]),e.jsx(O,{getContainer:!1,title:`Detalles Envio ${s}`,open:a,onCancel:()=>r(!1),styles:{header:{textAlign:"center"}},style:{textTransform:"uppercase"},okButtonProps:{style:{display:"none"}},centered:!0,width:750,children:o?e.jsxs(i,{style:{maxWidth:650,margin:"0 auto",marginTop:"30px"},size:"large",layout:"vertical",labelAlign:"left",initialValues:{codigo:(h=o.cabecero)==null?void 0:h.codigo,transporte:(u=o.cabecero)==null?void 0:u.transporte,fecha_envio:(d=o.cabecero)==null?void 0:d.fecha_envio,fecha_inicio_envio:(g=o.cabecero)==null?void 0:g.fecha_inicio_envio,almacen:(t=o.cabecero)==null?void 0:t.nombre_almacen,tienda:(n=o.cabecero)==null?void 0:n.tienda},children:[e.jsxs(v,{gutter:24,style:{textAlign:"center"},children:[e.jsx(l,{span:17,children:e.jsxs(b,{title:"Datos Envio",style:{width:"100%",border:"solid 1px",textAlign:"center"},children:[e.jsxs(v,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(i.Item,{label:"Codigo",name:"codigo",children:e.jsx(c,{readOnly:!0,style:{textAlign:"center"}})})}),e.jsx(l,{span:12,children:e.jsx(i.Item,{label:"Transporte",name:"transporte",children:e.jsx(c,{readOnly:!0,style:{textAlign:"center"}})})})]}),e.jsxs(v,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(i.Item,{label:"Fecha Envio",name:"fecha_envio",children:e.jsx(c,{readOnly:!0,style:{textAlign:"center"}})})}),e.jsx(l,{span:12,children:e.jsx(i.Item,{label:"Fecha Inicio Envio",name:"fecha_inicio_envio",children:e.jsx(c,{readOnly:!0,style:{textAlign:"center"}})})})]})]})}),e.jsx(l,{span:7,style:{textAlign:"center"},children:e.jsxs(b,{title:"Datos Destino",style:{width:"100%",border:"solid 1px",textAlign:"center"},children:[e.jsx(i.Item,{label:"Almacen Origen",name:"almacen",children:e.jsx(c,{style:{width:"100%",textAlign:"center"},readOnly:!0})}),e.jsx(i.Item,{label:"Tienda Destino",name:"tienda",children:e.jsx(c,{style:{width:"100%",textAlign:"center"},readOnly:!0})})]})})]}),e.jsx(M,{}),(j=o.detalle)==null?void 0:j.map((f,_)=>e.jsxs(v,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(i.Item,{label:"Producto",children:e.jsx(c,{value:f.producto_nombre+" "+f.color_nombre,readOnly:!0,style:{textAlign:"center"}})})}),e.jsx(l,{span:12,children:e.jsx(i.Item,{label:"Cantidad",children:e.jsx(c,{value:f.cantidad,readOnly:!0,style:{textAlign:"center"}})})})]},_))]}):e.jsx(e.Fragment,{children:"CARGANDO"})})},F=({tipo:a})=>{const{movimientos:r,loading:x,getMovimientos:s}=C(),[o,p]=m.useState(1),[h,u]=m.useState({movD:!1});m.useEffect(()=>{s(a)},[]);const d=(t,n)=>{u(j=>({...j,[t]:n}))},g=[{title:"Codigo",dataIndex:"codigo"},{title:"Nombre del Almacen",dataIndex:"nombre_almacen"},{title:"Nombre de la Tienda",dataIndex:"tienda"},{title:"Transporte",dataIndex:"transporte"},{title:"Fecha Envio",dataIndex:"fecha_envio"},{title:"Fecha Inicio Envio",dataIndex:"fecha_inicio_envio"},{title:"Ver mas",dataIndex:"movimiento_id",render:(t,n)=>e.jsx(A,{type:"primary",block:!0,onClick:()=>{p(t),d("movD",!0)},children:"+"})}];return e.jsxs(e.Fragment,{children:[e.jsx(I,{columnas:g,rowKey:"movimiento_id",dataSource:r,loading:x}),e.jsx(T,{openModal:h.movD,closeModal:()=>d("movD",!1),tipo:a,idM:o})]})},Z=()=>{const{tipo:a}=D();return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:"DETALLE DE LOS ENVIOS"}),e.jsx(F,{tipo:a})]})};export{Z as default};
