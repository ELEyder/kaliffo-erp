import{e as y,r as o,j as e,ai as C}from"./index-D5MhwzjO.js";import{b as _,d as k,e as T}from"./Corte-CYKnT9m1.js";import{h as S}from"./Producto-BYzNbulg.js";import{d as F}from"./Usuario-B18HNdlA.js";import{F as r}from"./index-DVJIl6I9.js";import{M as I}from"./index-CYfPMOno.js";import{S as u}from"./index-BWAbtRs7.js";import{T as b}from"./index-KjlJyLl6.js";import{B as f}from"./button-A47PWn8y.js";import{g as v}from"./Lote-Bl9cVKlX.js";import{P as E}from"./index-C9R6pYBa.js";import{F as O}from"./Table-CtUhijR0.js";import{F as A}from"./index-BfQYJXJj.js";import"./ApiClient-CULQ52Ii.js";import"./moment-i_m5gJd6.js";import"./ContextIsolator-Db01Mp-B.js";import"./useSize-DtBCnSoW.js";import"./EllipsisOutlined-HmlbpjMm.js";import"./useMergedState-CT3y2AoZ.js";import"./index-CmQVxU_y.js";import"./row-D3nIh8vm.js";import"./responsiveObserver-ClSOMJ9W.js";import"./ActionButton-CpjJvezN.js";import"./Skeleton-CxzTwDeq.js";import"./TextArea-CdJNamXB.js";import"./CheckOutlined-6IjInBGh.js";import"./DownOutlined-DXPYBfMJ.js";import"./styleChecker-k-lBdpFE.js";import"./addEventListener-vrbAq2BU.js";import"./index-8V7qSRmj.js";import"./LeftOutlined-CJ3P21Yz.js";import"./Dropdown-DyJ6tLAZ.js";import"./index-D_RvdFAe.js";import"./index-CXk_bCVW.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-BiS3UebB.js";import"./useBreakpoint-uOQvp99X.js";import"./index-CfRsS-7T.js";import"./EyeOutlined-DUFArE4t.js";const P=({openModal:m,closeModal:i,reload:x})=>{const{id:l}=y(),[n]=r.useForm(),[s,h]=o.useState([]),[j,p]=o.useState([]);return o.useEffect(()=>{S(l,h),F("talleres",p)},[]),e.jsx(I,{getContainer:!1,title:"NUEVOS CORTES",styles:{header:{textAlign:"center"}},open:m,onCancel:()=>i(!1),okText:"Añadir",onOk:n.submit,centered:!0,width:600,children:e.jsxs(r,{style:{margin:"0 auto"},size:"large",form:n,labelAlign:"center",layout:"vertical",onFinish:async t=>{await _(l,t),n.resetFields(),x(),i(!1)},initialValues:{detalles:[{cantidad_enviada:null,talla:null,taller_id:null}]},children:[e.jsx(r.Item,{name:"producto_id",label:"Producto",rules:[{required:!0,message:"Producto es requerido"}],children:e.jsx(u,{placeholder:"Seleccione productos",children:s==null?void 0:s.map(t=>e.jsxs(u.Option,{value:t.producto_id,children:[t.nombre," "]},`producto_${t.producto_id}`))})}),e.jsx(r.List,{name:"detalles",children:(t,{add:g,remove:d})=>e.jsxs(e.Fragment,{children:[t.map(a=>e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(r.Item,{name:[a.name,"cantidad_enviada"],label:"Cantidad Enviada",rules:[{required:!0,message:"Cantidad enviada es requerida"}],children:e.jsx(b,{style:{width:"100%"},min:1})}),e.jsx(r.Item,{name:[a.name,"talla"],label:"Talla",rules:[{required:!0,message:"Talla es requerida"}],children:e.jsx(b,{style:{width:"100%"}})}),e.jsx(r.Item,{name:[a.name,"taller_id"],label:"Taller",children:e.jsx(u,{placeholder:"Seleccione el taller",children:j.map(c=>e.jsxs(u.Option,{value:c.trabajador_id,children:[`${c.nombre} ${c.ap_paterno} ${c.ap_materno}`," "]},`taller_${c.trabajador_id}`))})}),e.jsx(f,{type:"danger",onClick:()=>d(a.name),children:"Eliminar"})]},a.key)),e.jsx(r.Item,{children:e.jsx(f,{type:"dashed",onClick:()=>g(),block:!0,children:"Agregar Detalle"})})]})})]})})},fe=()=>{const{id:m}=y(),[i,x]=o.useState([]),{reload:l,setReload:n}=C(),[s,h]=o.useState([]),[j,p]=o.useState(!1);o.useEffect(()=>{k(m,x),v(m,1,h)},[m,l]);const t=i.some(d=>d.estado===1),g=[{key:"taller",dataIndex:"taller",title:"Taller",align:"center"},{key:"producto",dataIndex:"producto",title:"Producto",align:"center"},{key:"cantidad_enviada",dataIndex:"cantidad_enviada",title:"Cantidad Enviada",align:"center"},...i.some(d=>d.estado===3)?[{key:"cantidad_recibida",dataIndex:"cantidad_recibida",title:"Cantidad Recibida",align:"center"}]:[],{key:"talla",dataIndex:"talla",title:"Talla",align:"center"},...t?[{title:"Opciones",key:"opciones",align:"center",render:(d,a)=>e.jsx(E,{title:"Eliminar",description:"¿Desea eliminar este corte?",okText:"Confirmar",cancelText:"No",onConfirm:()=>{T(a.corte_id,a.estado),n(!l)},children:e.jsx(f,{block:!0,style:{background:"#f54242",color:"white"},danger:!0,children:"Eliminar"})})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(O,{scroll:{x:"min-content"},dataSource:i,columns:g,rowKey:"corte_id"}),s===0||s===1?e.jsxs(e.Fragment,{children:[e.jsx(A,{onClick:()=>p(!0),tooltip:"Añadir Corte"}),e.jsx(P,{openModal:j,closeModal:()=>p(!1),reload:()=>n(!l)})]}):null]})};export{fe as default};
