import{j as e,r as l,e as C,N as q}from"./index-5R_ouSBL.js";import{T as A}from"./Tabla-CObWnnnH.js";import{a as R}from"./ApiClient-CULQ52Ii.js";import{F as S}from"./index-dLOo5b7D.js";import{B as I}from"./button-jOS5C1LE.js";import{P as F}from"./index-Dpzx1MjK.js";import{A as k}from"./AddIncidenciaModal-p1pBJbqF.js";import{U as v}from"./UpdateTrabajadorModal-BMAzjbIX.js";import{p,o as y,a as b,b as T,c as w,d as _,e as K}from"./Tools-BXmtYGau.js";import{a as E}from"./Usuario-BM7g3rI_.js";import{g as Y}from"./Tienda-CgK9HzvW.js";import{F as s}from"./index-DLbrpSsl.js";import{M as L}from"./index-ByydEJTS.js";import{I as u}from"./index-CPGs38Qn.js";import{R as j,C as m}from"./row-C04RvAS0.js";import{D as $}from"./index-C3IVX1Kv.js";import{S as U}from"./index-DIKG1Ll8.js";import{D as B}from"./index-B2sBOT07.js";import{F as O}from"./index-Dw2B-dtn.js";import"./Table-C3CYcypc.js";import"./useMergedState-jngh2BvR.js";import"./useSize-QLyh_IgM.js";import"./styleChecker-BlD5v5Ci.js";import"./EllipsisOutlined-D8t1qCe4.js";import"./addEventListener-CyGQU7o4.js";import"./DownOutlined-DAzCnoiM.js";import"./index-BWgbE5bE.js";import"./ContextIsolator-N8O_ycp3.js";import"./LeftOutlined-BwcoZu0t.js";import"./Dropdown-C0K2GNPB.js";import"./index-CXxVIYtY.js";import"./responsiveObserver-BgaHbeJ9.js";import"./index-DpTUGQrh.js";import"./index-BvxzAt7g.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-DYPVaqh4.js";import"./useBreakpoint-C6ym6tsh.js";import"./TextArea-CTbE0_w0.js";import"./ActionButton-DT92tj6F.js";import"./moment-DgoZvUpl.js";import"./Skeleton-Czx_vdt8.js";import"./EyeOutlined-D7Lb8DIC.js";import"./CheckOutlined-BphA7G9z.js";const z=(d,a,t,n)=>{let c=[{title:"Nombre",render:r=>`${r.nombre} ${r.ap_paterno} ${r.ap_materno}`},{title:"DNI",dataIndex:"dni"},{title:"Teléfono",dataIndex:"telefono"},{title:"Incidencias",dataIndex:"total_incidencias"},{title:"Sueldo",dataIndex:"sueldo"},{title:"Opciones",render:r=>e.jsxs(S,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:[e.jsx(I,{type:"primary",onClick:o=>{o.stopPropagation(),t(r),a("updT",!0)},children:"Editar"}),e.jsx(I,{onClick:o=>{o.stopPropagation(),t(r),a("addI",!0)},children:"+ Incidencia"}),e.jsx(F,{title:"¿ELIMINAR?",description:"¿Estás seguro de eliminar este usuario?",okText:"Confirmar",cancelText:"Cancelar",onConfirm:async o=>{o.stopPropagation(),await R.delete(`/trabajador/delete/${r.trabajador_id}`),n()},children:e.jsx(I,{type:"primary",danger:!0,onClick:o=>o.stopPropagation(),children:"Eliminar"})})]})}];return d==="ventas"&&c.splice(3,0,{title:"Tienda",dataIndex:"tienda",key:"tienda"}),c},W=({openModal:d,closeModal:a,tipoTrabajador:t,reload:n,setReload:c})=>{const[r]=s.useForm(),[o,f]=l.useState([]);return l.useEffect(()=>{t==="ventas"&&Y(f)},[t]),e.jsx(L,{forceRender:!0,getContainer:!1,styles:{header:{textTransform:"uppercase",textAlign:"center"},body:{height:"430px"}},title:`Añadir Nuevo Trabajador a ${t}`,open:d,onCancel:a,okText:"Añadir",onOk:r.submit,centered:!0,children:e.jsxs(s,{autoComplete:"false",style:{maxWidth:500,margin:"0 auto"},size:"large",form:r,layout:"vertical",labelAlign:"center",id:"formulariocrear",onFinish:async i=>{await E(t,i),n(),a(!1),r.resetFields()},children:[e.jsx(s.Item,{style:{marginTop:20},name:"nombre",label:"Nombres",rules:[{required:!0,message:"Nombres requeridos"}],children:e.jsx(u,{onPaste:p,onKeyDown:y,onInput:b})}),e.jsxs(j,{justify:"space-around",align:"middle",gutter:{xs:8,sm:16,md:24,lg:32},children:[e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(s.Item,{name:"ap_paterno",label:"Apellido Paterno",rules:[{required:!0,message:"Apellido Paterno Requerido"}],children:e.jsx(u,{onPaste:p,onKeyDown:y,onInput:b})})}),e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(s.Item,{name:"ap_materno",label:"Apellido Materno",rules:[{required:!0,message:"Apellido Materno Requerido"}],children:e.jsx(u,{onPaste:p,onKeyDown:y,onInput:b})})})]}),e.jsxs(j,{justify:"space-around",align:"middle",gutter:{xs:8,sm:16,md:24,lg:32},children:[e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(s.Item,{label:"Fecha Nacimiento",name:"fecha_nacimiento",rules:[{required:!0,message:"Fecha Nacimiento requerido"}],children:e.jsx($,{placement:"bottomRight",popupStyle:{height:"257px"},placeholder:"DD-MM-YYYY",format:"DD-MM-YYYY"})})}),e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(s.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Telefono Requerido"}],children:e.jsx(u,{showCount:!0,maxLength:9,onPaste:p,onKeyDown:T,onInput:w})})})]}),e.jsxs(j,{justify:"space-around",align:"middle",gutter:{xs:8,sm:16,md:24,lg:32},children:[e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(s.Item,{name:"dni",label:"DNI",rules:[{required:!0,message:"DNI requerido"}],children:e.jsx(u,{showCount:!0,maxLength:8,onPaste:p,onKeyDown:T,onInput:w})})}),e.jsx(m,{span:12,className:"gutter-row",children:e.jsx(s.Item,{name:"sueldo",label:"Sueldo",rules:[{required:!0,message:"Sueldo requerido"}],children:e.jsx(u,{prefix:"S/.",onPaste:p,onKeyDown:_,onInput:K})})})]}),e.jsx(j,{children:e.jsx(m,{children:t==="ventas"&&e.jsx(s.Item,{name:"tienda_id",label:"Tienda Asignada",rules:[{required:!0,message:"Tienda Asignada"}],children:e.jsx(U,{options:o.map(i=>({value:i.tienda_id,label:i.tienda,key:i.tienda_id}))})})})})]})})},_e=()=>{const d={ventas:1,talleres:2,miscelaneos:3,costureros:4},{tipoTrabajador:a}=C(),[t,n]=l.useState(!0),[c,r]=l.useState([]),[o,f]=l.useState(`/trabajador?rol=${d[a]}`),[i,N]=l.useState([]),[g,D]=l.useState({addT:!1,addI:!1,updT:!1}),x=(h,M)=>{D(P=>({...P,[h]:M}))};return l.useEffect(()=>{f(`/trabajador?rol=${d[a]}`);let h=z(a,x,N,()=>n(!t));r(h)},[a]),Object.keys(d).includes(a)?e.jsxs(e.Fragment,{children:[e.jsx(B,{style:{textTransform:"uppercase"},children:a}),e.jsx(A,{columnas:c,rowKey:"trabajador_id",url:o,reload:t}),e.jsx(O,{tooltip:"Añadir nuevo trabajador",onClick:()=>x("addT",!0)}),e.jsx(W,{openModal:g.addT,closeModal:()=>x("addT",!1),tipoTrabajador:a,reload:()=>n(!t)}),e.jsx(v,{openModal:g.updT,closeModal:()=>x("updT",!1),tipoTrabajador:a,reload:()=>n(!t),data:i}),e.jsx(k,{openModal:g.addI,closeModal:()=>x("addI",!1),reload:()=>n(!t),data:i})]}):e.jsx(q,{to:"/error"})};export{_e as default};
