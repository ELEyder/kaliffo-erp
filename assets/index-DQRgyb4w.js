import{e as h,r as d,j as e,L as A}from"./index-DnZSuapv.js";import{b as N}from"./Tienda-DchRzPO6.js";import{a as R,R as v}from"./Reporte-DjNiyq89.js";import{C as V}from"./index-BLOaBrrf.js";import{B as p}from"./button-DxAvYtf7.js";import{L as k}from"./index-BCdAvJOG.js";import{T as D}from"./index-CU-hXdd1.js";import{P as $}from"./ProductoDetalleModal-BxluOd1X.js";import{a as j}from"./apiClient-DNqqoRi2.js";import{T as x}from"./Tabla-BwLH4X_R.js";import{F as f}from"./index-BjGP48R2.js";import{P as T}from"./index-BRImeMB9.js";import{U as B}from"./UpdateTrabajadorModal-BdvowKqT.js";import{b as O,u as F}from"./Usuario-BLIord41.js";import{F as y}from"./index-eEjfzd7p.js";import{M as L}from"./index-CQoRxuqN.js";import{S as _}from"./index-CAw0ik1A.js";import{D as M}from"./index-DnZuPcqL.js";import{T as U}from"./index-rbW2pF-2.js";import{F as G}from"./index-CRStyn0e.js";import"./useSize-DL9WfM8p.js";import"./Skeleton-C8RXkADb.js";import"./Table-UylViyS0.js";import"./useMergedState-xnIRtK6W.js";import"./styleChecker-BPMTEHVB.js";import"./EllipsisOutlined-BC2kcC9O.js";import"./addEventListener-BGVn8IVC.js";import"./DownOutlined-DfCZxesi.js";import"./index-nq-gG-E2.js";import"./ContextIsolator-X51Zuf7C.js";import"./LeftOutlined-DUJeaJ5E.js";import"./index-OoAlQgr1.js";import"./responsiveObserver-P31G7zPC.js";import"./index-8gkIUhhz.js";import"./index-BsZC5oSy.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-DvbmuEp_.js";import"./useBreakpoint-CHVb293n.js";import"./TextArea-D6coABml.js";import"./index-CfhjOVlK.js";import"./EyeOutlined-Dgph3YEA.js";import"./row-Bgu54Vpq.js";import"./EditOutlined-Bm2pbz4p.js";import"./CheckOutlined-CxFn5oU1.js";import"./Producto-Cd6i44JA.js";import"./ActionButton-HZPJWirw.js";import"./Tools-BXmtYGau.js";import"./index-CuAlWmBO.js";import"./moment-64TmN0UP.js";const{Paragraph:W,Text:He}=D,K=()=>{const{id:a}=h(),[o,i]=d.useState([]);return d.useEffect(()=>{N(a,i)},[a]),e.jsx(V,{style:{width:320,textAlign:"center"},title:o.tienda,actions:[e.jsx(p,{onClick:()=>R(a),type:"primary",block:!0,style:{fontWeight:"bold"},children:"OBTENER REPORTE"})],children:e.jsx(k,{itemLayout:"horizontal",dataSource:[{title:"DIRECCIÓN",value:o.direccion==null?"0":`${o.direccion}`},{title:"TELÉFONO",value:o.telefono==null?"0":`${o.telefono}`},{title:"STOCK TOTAL",value:o.total_stock==null?"0":`${o.total_stock}`},{title:"VENTAS TOTALES",value:o.ventas==null?"0":`${o.ventas}`},{title:"PERSONAL ASIGNADO",value:`${o.total_usuarios}`}],renderItem:r=>e.jsx(k.Item,{children:e.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:[e.jsxs("strong",{children:[r.title,":"]}),e.jsx(W,{copyable:!0,children:r.value})]})})})})},q=(a,o,i)=>[{title:"Nombre",key:"nombre",render:t=>`${t.nombre} ${t.ap_paterno} ${t.ap_materno}`,align:"center"},{title:"DNI",dataIndex:"dni",key:"dni",align:"center"},{title:"Teléfono",dataIndex:"telefono",key:"telefono",align:"center"},{title:"Opciones",dataIndex:"trabajador_id",key:"opciones",align:"center",render:t=>e.jsxs(f,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:[e.jsx(p,{type:"primary",onClick:n=>{n.stopPropagation(),console.log("En reparación")},children:"+"}),e.jsx(p,{type:"primary",onClick:n=>{n.stopPropagation(),o(t),a("updT",!0)},children:"Editar"}),e.jsx(T,{title:"ELIMINAR",description:"DESEA ELIMINAR A",okText:"Confirmar",cancelText:"NO",onConfirm:async n=>{n.stopPropagation(),await j.delete(`/trabajador/delete/${t}`),i()},children:e.jsx(p,{style:{background:"#f54242",color:"white"},danger:!0,onClick:n=>n.stopPropagation(),children:"Eliminar"})})]})}],z=a=>`Trabajador?tienda_id=${a}`,H=a=>[{title:"Nº",dataIndex:"id",key:"id",align:"center"},{title:"Código",dataIndex:"codigo",key:"codigo",align:"center"},{title:"Tipo de Venta",dataIndex:"tipo",key:"tipo",align:"center"},{title:"Fecha de Venta",dataIndex:"fechaVenta",key:"fechaVenta",align:"center"},{title:"Cantidad",dataIndex:"cantidad",key:"cantidad",align:"center"},{title:"Total Bruto",dataIndex:"totalBruto",key:"totalBruto",align:"center"},{title:"Total Neto",dataIndex:"totalNeto",key:"totalNeto",align:"center"},{title:"IGV",dataIndex:"IGV",key:"IGV",align:"center"},{title:"Tipo de Pago",dataIndex:"tipoPago",key:"tipoPago",align:"center"},{title:"RUC",dataIndex:"RUC",key:"RUC",align:"center"},{title:"Tienda",dataIndex:"tiendaId",key:"tiendaId",align:"center"},{title:"Opciones",dataIndex:"codigo",key:"opciones",align:"center",render:i=>e.jsx(f,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:e.jsx(T,{title:"ANULAR",description:"¿DESEA ANULAR ESTA VENTA?",okText:"Confirmar",onConfirm:async r=>{r.stopPropagation(),await j.delete(`/trabajador/delete/${i}`),a()},cancelText:"NO",children:e.jsx(p,{block:!0,style:{background:"#f54242",color:"white"},danger:!0,onClick:r=>r.stopPropagation(),children:"Anular"})})})}],J=()=>[{id:3,codigo:3,tipo:1,fechaVenta:"2024-09-12",cantidad:2,totalBruto:2,totalNeto:2,IGV:2,tipoPago:"Tarjeta de crédito",RUC:1231234123,tiendaId:123145143},{id:4,codigo:4,tipo:1,fechaVenta:"2024-09-12",cantidad:2,totalBruto:2,totalNeto:2,IGV:2,tipoPago:"Tarjeta de crédito",RUC:123145143,tiendaId:123145143}],Q=(a,o,i)=>[{title:"Producto",key:"nombre",dataIndex:"nombre",align:"center"},{title:"Stock",key:"stock",align:"center",dataIndex:"stock",defaultSortOrder:"ascend",onCell:t=>({style:{background:t.stock>=50?"green":t.stock<=20?"#f54242":"#FCFB77",color:t.stock<=20||t.stock>=50?"white":"black",padding:"10px"}})},{title:"Precio",key:"precioBase",dataIndex:"precioBase",align:"center",render:t=>`S/ ${t}`},{title:"Descuento",dataIndex:"descuento",key:"descuento",align:"center",render:t=>`${t}%`,onCell:t=>({style:{background:t.descuento<=10?"green":t.descuento>=20?"#f54242":"#FCFB77",color:t.descuento<=10||t.descuento>=20?"white":"black",padding:"10px"}})},{title:"Ver más",dataIndex:"producto_id",key:"vermas",align:"center",render:(t,n)=>e.jsx(p,{type:"primary",block:!0,onClick:()=>{o(t),a("proD",!0)},children:"+"})}],X=a=>`producto?tienda_id=${a}`,Y=({openModal:a,closeModal:o,id:i,reload:r})=>{const[t]=y.useForm(),[n,m]=d.useState([]);return d.useEffect(()=>{O(i,m)},[i]),e.jsxs(L,{forceRender:!0,getContainer:!1,title:"Añadir nuevo trabajador",open:a,onCancel:o,style:{textTransform:"uppercase"},onOk:t.submit,okText:"Guardar",centered:!0,width:500,children:[e.jsx(y,{style:{maxWidth:500,margin:"0 auto"},size:"large",form:t,layout:"vertical",labelAlign:"center",id:"formulariaddpersonal",onFinish:async l=>{await F(i,l),r(),o()},children:e.jsx(y.Item,{style:{marginTop:20},name:"personal",label:"Personal",rules:[{required:!0,message:"Personal Requerido"}],children:e.jsx(_,{showSearch:!0,placeholder:"Seleccionar Un personal",filterOption:(l,c)=>((c==null?void 0:c.label)??"").toLowerCase().includes(l.toLowerCase()),options:n.map(l=>({value:l.usuario_id,label:l.nombre+" "+l.ap_paterno+" "+l.ap_materno,key:l.usuario_id}))})})}),e.jsx(A,{to:"/trabajadores/tipo/ventas",style:{textDecoration:"none"},children:"¿Trabajador Nuevo? "})]})},Je=()=>{const{id:a}=h(),[o,i]=d.useState(1),[r,t]=d.useState(!0),[n,m]=d.useState(1),[l,c]=d.useState("none"),[u,I]=d.useState({updT:!1,addP:!1,proD:!1}),s=(g,E)=>{I(S=>({...S,[g]:E}))},b=Q(s,m),C=q(s,m,()=>t(!r)),P=H(s),w=[{key:"1",label:"Productos",children:e.jsx(x,{columnas:b,rowKey:"producto_id",url:X(a),reload:()=>t(!r)})},{key:"2",label:"Personal",children:e.jsx(x,{columnas:C,rowKey:"trabajador_id",url:z(a),reload:()=>t(!r)})},{key:"3",label:"Ventas",children:e.jsx(x,{columnas:P,rowKey:"codigo",dataSource:J(),reload:()=>t(!r)})}];return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:"Detalles de la Tienda"}),e.jsxs(f,{wrap:!0,gap:"large",justify:"space-evenly",align:"flex-start",style:{width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"1rem"},children:[e.jsx(K,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"}}),e.jsx(U,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"},items:w,onChange:g=>{g=="2"?c("block"):c("none")}})]}),e.jsx(G,{tooltip:"Añadir Nuevo Personal",onClick:()=>s("addP",!0),type:"primary",style:{display:l},icon:e.jsx(v,{})}),e.jsx(B,{openModal:u.updT,closeModal:()=>s("updT",!1),id:n,reload:()=>t(!r)}),e.jsx(Y,{openModal:u.addP,closeModal:()=>s("addP",!1),id:a,reload:()=>t(!r)}),e.jsx($,{openModal:u.proD,closeModal:()=>s("proD",!1),id:a,idp:o})]})};export{Je as default};
