import{e as k,r as s,j as e,L as E}from"./index-D5MhwzjO.js";import{b as N}from"./Tienda-CgK9HzvW.js";import{a as R,R as v}from"./Reporte-CHP25XPT.js";import{C as V}from"./index-BHNMf-Ox.js";import{B as p}from"./button-A47PWn8y.js";import{L as h}from"./index-DhJY5_zC.js";import{T as D}from"./index-CS4LA-NH.js";import{P as $}from"./ProductoDetalleModal-CNZlxoC_.js";import{a as j}from"./ApiClient-CULQ52Ii.js";import{T as g}from"./Tabla-DJMOa8fD.js";import{F as y}from"./index-3FBCm-hr.js";import{P as T}from"./index-C9R6pYBa.js";import{U as B}from"./UpdateTrabajadorModal-BG_8fwwP.js";import{b as O,u as F}from"./Usuario-B18HNdlA.js";import{F as f}from"./index-DVJIl6I9.js";import{M as L}from"./index-CYfPMOno.js";import{S as _}from"./index-BWAbtRs7.js";import{D as M}from"./index-DPCJsCyH.js";import{T as U}from"./index-F-Te-_IQ.js";import{F as G}from"./index-BfQYJXJj.js";import"./useSize-DtBCnSoW.js";import"./Skeleton-CxzTwDeq.js";import"./Table-CtUhijR0.js";import"./useMergedState-CT3y2AoZ.js";import"./styleChecker-k-lBdpFE.js";import"./EllipsisOutlined-HmlbpjMm.js";import"./addEventListener-vrbAq2BU.js";import"./DownOutlined-DXPYBfMJ.js";import"./index-8V7qSRmj.js";import"./ContextIsolator-Db01Mp-B.js";import"./LeftOutlined-CJ3P21Yz.js";import"./Dropdown-DyJ6tLAZ.js";import"./index-CmQVxU_y.js";import"./responsiveObserver-ClSOMJ9W.js";import"./index-D_RvdFAe.js";import"./index-CXk_bCVW.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-BiS3UebB.js";import"./useBreakpoint-uOQvp99X.js";import"./TextArea-CdJNamXB.js";import"./index-CfRsS-7T.js";import"./EyeOutlined-DUFArE4t.js";import"./row-D3nIh8vm.js";import"./EditOutlined-8HL3FklK.js";import"./CheckOutlined-6IjInBGh.js";import"./Producto-BYzNbulg.js";import"./ActionButton-CpjJvezN.js";import"./moment-i_m5gJd6.js";import"./Tools-BXmtYGau.js";import"./index-DSOr_j0w.js";const{Paragraph:W,Text:Je}=D,K=()=>{const{id:a}=k(),[o,n]=s.useState([]);return s.useEffect(()=>{N(a,n)},[a]),e.jsx(V,{style:{width:400,textAlign:"center"},title:o.tienda,actions:[e.jsx(p,{onClick:()=>R(a),type:"primary",block:!0,style:{fontWeight:"bold"},children:"OBTENER REPORTE"})],children:e.jsx(h,{itemLayout:"horizontal",dataSource:[{title:"DIRECCIÓN",value:o.direccion==null?"0":`${o.direccion}`},{title:"TELÉFONO",value:o.telefono==null?"0":`${o.telefono}`},{title:"STOCK TOTAL",value:o.total_stock==null?"0":`${o.total_stock}`},{title:"VENTAS TOTALES",value:o.ventas==null?"0":`${o.ventas}`},{title:"PERSONAL ASIGNADO",value:`${o.total_usuarios}`}],renderItem:r=>e.jsx(h.Item,{children:e.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:[e.jsxs("strong",{children:[r.title,":"]}),e.jsx(W,{copyable:!0,children:r.value})]})})})})},q=(a,o,n)=>[{title:"Nombre",key:"nombre",render:t=>`${t.nombre} ${t.ap_paterno} ${t.ap_materno}`},{title:"DNI",dataIndex:"dni"},{title:"Teléfono",dataIndex:"telefono"},{title:"Opciones",render:t=>e.jsxs(y,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:[e.jsx(p,{type:"primary",onClick:l=>{l.stopPropagation(),o(t),a("updT",!0)},children:"Editar"}),e.jsx(T,{title:"ELIMINAR",description:"DESEA ELIMINAR A",okText:"Confirmar",cancelText:"NO",onConfirm:async l=>{l.stopPropagation(),await j.delete(`/trabajador/delete/${t.trabajador_id}`),n()},children:e.jsx(p,{style:{background:"#f54242",color:"white"},danger:!0,onClick:l=>l.stopPropagation(),children:"Eliminar"})})]})}],z=a=>`Trabajador?tienda_id=${a}`,H=a=>[{title:"Nº",dataIndex:"id",key:"id",align:"center"},{title:"Código",dataIndex:"codigo",key:"codigo",align:"center"},{title:"Tipo de Venta",dataIndex:"tipo",key:"tipo",align:"center"},{title:"Fecha de Venta",dataIndex:"fechaVenta",key:"fechaVenta",align:"center"},{title:"Cantidad",dataIndex:"cantidad",key:"cantidad",align:"center"},{title:"Total Bruto",dataIndex:"totalBruto",key:"totalBruto",align:"center"},{title:"Total Neto",dataIndex:"totalNeto",key:"totalNeto",align:"center"},{title:"IGV",dataIndex:"IGV",key:"IGV",align:"center"},{title:"Tipo de Pago",dataIndex:"tipoPago",key:"tipoPago",align:"center"},{title:"RUC",dataIndex:"RUC",key:"RUC",align:"center"},{title:"Tienda",dataIndex:"tiendaId",key:"tiendaId",align:"center"},{title:"Opciones",dataIndex:"codigo",key:"opciones",align:"center",render:n=>e.jsx(y,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:e.jsx(T,{title:"ANULAR",description:"¿DESEA ANULAR ESTA VENTA?",okText:"Confirmar",onConfirm:async r=>{r.stopPropagation(),await j.delete(`/trabajador/delete/${n}`),a()},cancelText:"NO",children:e.jsx(p,{block:!0,style:{background:"#f54242",color:"white"},danger:!0,onClick:r=>r.stopPropagation(),children:"Anular"})})})}],J=()=>[{id:3,codigo:3,tipo:1,fechaVenta:"2024-09-12",cantidad:2,totalBruto:2,totalNeto:2,IGV:2,tipoPago:"Tarjeta de crédito",RUC:1231234123,tiendaId:123145143},{id:4,codigo:4,tipo:1,fechaVenta:"2024-09-12",cantidad:2,totalBruto:2,totalNeto:2,IGV:2,tipoPago:"Tarjeta de crédito",RUC:123145143,tiendaId:123145143}],Q=(a,o,n)=>[{title:"Producto",key:"nombre",dataIndex:"nombre",align:"center"},{title:"Stock",key:"stock",align:"center",dataIndex:"stock",defaultSortOrder:"ascend",onCell:t=>({style:{background:t.stock>=50?"green":t.stock<=20?"#f54242":"#FCFB77",color:t.stock<=20||t.stock>=50?"white":"black",padding:"10px"}})},{title:"Precio",key:"precioBase",dataIndex:"precioBase",align:"center",render:t=>`S/ ${t}`},{title:"Descuento",dataIndex:"descuento",key:"descuento",align:"center",render:t=>`${t}%`,onCell:t=>({style:{background:t.descuento<=10?"green":t.descuento>=20?"#f54242":"#FCFB77",color:t.descuento<=10||t.descuento>=20?"white":"black",padding:"10px"}})},{title:"Ver más",dataIndex:"producto_id",key:"vermas",align:"center",render:(t,l)=>e.jsx(p,{type:"primary",block:!0,onClick:()=>{o(t),a("proD",!0)},children:"+"})}],X=a=>`producto?tienda_id=${a}`,Y=({openModal:a,closeModal:o,id:n,reload:r})=>{const[t]=f.useForm(),[l,m]=s.useState([]);return s.useEffect(()=>{O(n,m)},[n]),e.jsxs(L,{forceRender:!0,getContainer:!1,title:"Añadir nuevo personal",open:a,onCancel:o,style:{textTransform:"uppercase"},onOk:t.submit,okText:"Guardar",centered:!0,width:500,children:[e.jsx(f,{style:{maxWidth:500,margin:"0 auto"},size:"large",form:t,layout:"vertical",labelAlign:"center",id:"formulariaddpersonal",onFinish:async i=>{await F(n,i),r(),o()},children:e.jsx(f.Item,{style:{marginTop:20},name:"personal",label:"Personal",rules:[{required:!0,message:"Personal Requerido"}],children:e.jsx(_,{showSearch:!0,placeholder:"Seleccionar Un personal",filterOption:(i,c)=>((c==null?void 0:c.label)??"").toLowerCase().includes(i.toLowerCase()),options:l.map(i=>({value:i.trabajador_id,label:i.nombre+" "+i.ap_paterno+" "+i.ap_materno,key:i.trabajador_id}))})})}),e.jsx(E,{to:"/trabajadores/tipo/ventas",style:{textDecoration:"none"},children:"¿Trabajador Nuevo? "})]})},Qe=()=>{const{id:a}=k(),[o,n]=s.useState(1),[r,t]=s.useState(!0),[l,m]=s.useState([]),[i,c]=s.useState("none"),[u,I]=s.useState({updT:!1,addP:!1,proD:!1}),d=(x,S)=>{I(A=>({...A,[x]:S}))},b=Q(d,m),C=q(d,m,()=>t(!r)),P=H(d),w=[{key:"1",label:"Productos",children:e.jsx(g,{columnas:b,rowKey:"producto_id",url:X(a),reload:()=>t(!r)})},{key:"2",label:"Personal",children:e.jsx(g,{columnas:C,rowKey:"trabajador_id",url:z(a),reload:()=>t(!r)})},{key:"3",label:"Ventas",children:e.jsx(g,{columnas:P,rowKey:"codigo",dataSource:J(),reload:()=>t(!r)})}];return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:"Detalles de la Tienda"}),e.jsxs(y,{wrap:!0,gap:"large",justify:"space-evenly",align:"flex-start",style:{width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"1rem"},children:[e.jsx(K,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"}}),e.jsx(U,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"},items:w,onChange:x=>{x=="2"?c("block"):c("none")}})]}),e.jsx(G,{tooltip:"Añadir Nuevo Personal",onClick:()=>d("addP",!0),type:"primary",style:{display:i},icon:e.jsx(v,{})}),e.jsx(B,{openModal:u.updT,closeModal:()=>d("updT",!1),data:l,reload:()=>t(!r)}),e.jsx(Y,{openModal:u.addP,closeModal:()=>d("addP",!1),id:a,reload:()=>t(!r)}),e.jsx($,{openModal:u.proD,closeModal:()=>d("proD",!1),id:a,idp:o})]})};export{Qe as default};
