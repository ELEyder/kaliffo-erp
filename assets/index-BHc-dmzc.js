import{e as S,r as l,j as t}from"./index-BmWU6D_k.js";import{g as $}from"./Usuario-DAEWVT2H.js";import{g as A,R as D}from"./Reporte-C-iMqZ1k.js";import{C as R}from"./index-CEUgyjtf.js";import{I as P}from"./index-CfP9OusN.js";import{L as I}from"./index-Cfc3hx49.js";import{D as f}from"./index-BEuZ7_8s.js";import{R as v,C as N}from"./row-BniTPEK9.js";import{D as O}from"./Table-Cbq78Rq0.js";import{T as B}from"./index-G5Mey052.js";import{T as x}from"./Tabla-BqunnPmk.js";import{a as j}from"./ApiClient-CULQ52Ii.js";import{F as k}from"./index-DRCwRV_O.js";import{B as m}from"./button-FicSlTbO.js";import{P as y}from"./index-CaOmSwlx.js";import{u as U,A as H}from"./AddIncidenciaModal-sQm7k63r.js";import{F as d}from"./index-CRHOBmzH.js";import{M as L}from"./index-TD-6KXji.js";import{I as b}from"./index-CWnVwJAY.js";import{S as C}from"./index-DkTDfaSE.js";import{T as W}from"./index-BB4Vp943.js";import{F as q}from"./index-CFtlCFz4.js";import"./moment-C0tx1AGM.js";import"./useSize-C8agW3TM.js";import"./Skeleton-xnhcM5Bx.js";import"./EyeOutlined-HRnMiVRE.js";import"./addEventListener-Baxbb4oQ.js";import"./useMergedState-hu-o9cEA.js";import"./EllipsisOutlined-B9hgabmc.js";import"./LeftOutlined-DjgEGlNz.js";import"./index-D-PHtZF_.js";import"./ContextIsolator-CDAbamh3.js";import"./responsiveObserver-JZknLzTk.js";import"./useBreakpoint-lHdzJhA0.js";import"./styleChecker-CoLYYL8A.js";import"./DownOutlined-YH-8aLNw.js";import"./index-BT6oH27b.js";import"./Dropdown-CIamlYNK.js";import"./index-DO-3uIrf.js";import"./index-NOsMt7kP.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-m78rnEY1.js";import"./TextArea-DI-TOUo6.js";import"./EditOutlined-B2QaMLHC.js";import"./CheckOutlined-ItNP2_B5.js";import"./ActionButton-9LZ9Y4ui.js";const{Paragraph:z}=B,K=()=>{const i=[{key:"1",label:"Historico"},{key:"2",label:"Ultimo Mes"}],{id:r}=S(),[e,o]=l.useState([]);l.useEffect(()=>{$(r,o)},[r]);const[a,s]=l.useState(["eyder1.jpg","eyder2.jpg","eyder3.jpg","eyder4.jpg","eyder5.gif"]);return t.jsxs(R,{style:{width:300,textAlign:"center"},title:`${e.nombre} ${e.ap_paterno} ${e.ap_materno}`,cover:t.jsx(P,{width:"100%",height:"auto",src:e.nombre==="Rodrigo"?"/img/usuarios/rodrigo.jpg":e.nombre==="Pablo"?"/img/usuarios/pablo.jpg":e.nombre==="Eyder"?`/img/usuarios/${a[Math.floor(Math.random()*5)]}`:`/img/usuarios/${e.usuario_id}.jpg`,fallback:"/img/usuarios/0.jpg"}),children:[t.jsx(I,{itemLayout:"horizontal",dataSource:[{title:"DNI",value:e.dni},{title:"TELÉFONO",value:e.telefono},{title:"HORAS TRABAJADAS",value:e.total_horas_trabajadas},{title:"NUM. INCIDENCIAS",value:e.total_incidencias},{title:"SALARIO",value:"S/ "+e.sueldo}],renderItem:n=>t.jsx(I.Item,{children:t.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:[t.jsxs("strong",{children:[n.title,":"]}),t.jsx(z,{copyable:!0,children:n.value})]})})}),t.jsx(f,{}),t.jsx(v,{justify:"center",align:"middle",children:t.jsx(N,{children:t.jsx(O.Button,{menu:{items:i,onClick:({key:n})=>A(r,n)},block:!0,size:"large",style:{fontWeight:"bold"},children:"OBTENER REPORTE"})})})]})},Y=(i,r,e)=>[{title:"N°",dataIndex:"id",render:(a,s,n)=>n+1},{title:"Incidencia",dataIndex:"tipo",render:a=>({1:"Familiar",2:"Salud",3:"Personal"})[a]||"Desconocido",onCell:a=>({style:{background:a.tipo===1?"#FCFB77":a.tipo===2?"orange":"#f54242",color:a.tipo===3?"white":"black",padding:"10px"}})},{title:"Descripción",dataIndex:"descripcion"},{title:"Fecha",dataIndex:"fecha",render:a=>{if(!a)return"-";const s=new Date(a),n=String(s.getDate()).padStart(2,"0"),p=String(s.getMonth()+1).padStart(2,"0"),u=s.getFullYear();return`${n}/${p}/${u}`}},{title:"Opciones",render:a=>t.jsxs(k,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:[t.jsx(m,{type:"primary",block:!0,onClick:()=>{r(a),i("updI",!0)},children:"Editar"}),t.jsx(y,{title:"¿Estás seguro de que deseas eliminar esta incidencia?",okText:"Confirmar",cancelText:"Cancelar",onConfirm:async()=>{await j.delete(`/incidencia/delete/${a.incidencia_id}`),e()},children:t.jsx(m,{block:!0,style:{background:"#f54242",color:"white"},danger:!0,children:"Eliminar"})})]})}],V=i=>`/incidencia?usuario_id=${i}`,G=i=>{const r=[{title:"Fecha",dataIndex:"fecha",key:"fecha",align:"center",sorter:{compare:(e,o)=>e.fecha.localeCompare(o.fecha),multiple:2},render:e=>{if(!e)return"-";const o=new Date(e),a=String(o.getDate()).padStart(2,"0"),s=String(o.getMonth()+1).padStart(2,"0"),n=o.getFullYear();return`${a}/${s}/${n}`}},{title:"Hora de Ingreso",dataIndex:"hora_entrada",key:"hora_entrada",align:"center"},{title:"Hora de Salida",dataIndex:"hora_salida",key:"hora_salida",align:"center"},{title:"Horas Trabajadas",dataIndex:"horas_trabajadas",key:"horas_trabajadas",align:"center",onCell:e=>({style:{background:e.min_trabajadas>=540?"green":e.min_trabajadas<=300?"#f54242":"#FCFB77",color:e.min_trabajadas<=300?"white":"black"}})}];return r.push({title:"Opciones",dataIndex:"horario_id",key:"opciones",align:"center",render:e=>t.jsx(y,{title:"ELIMINAR",description:"DESEA ELIMINAR A",okText:"Confirmar",cancelText:"NO",onConfirm:async()=>{await j.delete(`/asistencia/delete/${e}`),i()},children:t.jsx(m,{block:!0,type:"primary",danger:!0,children:"Eliminar"})})}),r},J=i=>`/asistencia?usuario_id=${i}`,Q=i=>{const r=[{title:"Monto Pagado",dataIndex:"montoPagado",render:e=>"S/"+e},{title:"Monto Faltante",dataIndex:"montoFaltante",render:e=>"S/"+e},{title:"Fecha",dataIndex:"fecha",render:e=>{if(!e)return"-";const o=new Date(e),a=String(o.getDate()).padStart(2,"0"),s=String(o.getMonth()+1).padStart(2,"0"),n=o.getFullYear();return`${a}/${s}/${n}`}},{title:"Estado",dataIndex:"estado",render:e=>({0:"Pagado",1:"Pendiente"})[e]||"Desconocido",onCell:e=>({style:{background:e.estado==="En Proceso"?"#FCFB77":"green",color:e.estado==="En Proceso"?"black":"white"}})}];return r.push({title:"Opciones",dataIndex:"pago_id",key:"opciones",align:"center",render:e=>t.jsxs(y,{title:"¿ELIMINAR?",description:"¿Está seguro de eliminar el pago?",okText:"Confirmar",cancelText:"Cancelar",onConfirm:async()=>{await j.delete(`/pago/delete/${e}`),i()},children:[t.jsx(m,{style:{background:"#f54242",color:"white"},danger:!0,children:"Eliminar"})," "]})}),r},X=i=>`/pago/${i}`,{Option:h}=C,Z=({openModal:i,closeModal:r,reload:e,values:o})=>{const[a]=d.useForm();return l.useEffect(()=>{a.setFieldsValue({descripcion:o.descripcion,tipo:o.tipo})},[o]),t.jsx(L,{forceRender:!0,getContainer:!1,title:"Editar Incidencia",open:i,onCancel:r,okText:"Guardar",onOk:a.submit,style:{textTransform:"uppercase"},centered:!0,width:500,children:t.jsxs(d,{style:{maxWidth:500,margin:"0 auto"},size:"large",form:a,layout:"vertical",labelAlign:"center",id:"formularioeditar",onFinish:async()=>{await U(o.incidencia_id,a.getFieldsValue()),e(),r()},children:[t.jsx(d.Item,{style:{marginTop:20},name:"descripcion",label:"Descripción",rules:[{required:!0,message:"Descripción requerida"}],children:t.jsx(b,{})}),t.jsx(d.Item,{style:{marginTop:20},name:"tipo",label:"Tipo",rules:[{required:!0,message:"Tipo requerido"}],children:t.jsxs(C,{placeholder:"Selecciona una opción",children:[t.jsx(h,{value:1,children:"Familiar"}),t.jsx(h,{value:2,children:"Salud"}),t.jsx(h,{value:3,children:"Personal"})]})}),t.jsx(d.Item,{name:"usuario_id",noStyle:!0,children:t.jsx(b,{type:"hidden"})})]})})},Ke=()=>{const{id:i}=S(),[r,e]=l.useState(!0),[o,a]=l.useState(!0),[s,n]=l.useState({addI:!1,updI:!1}),[p,u]=l.useState("Incidencias"),c=(g,E)=>{n(M=>({...M,[g]:E}))},F=Y(c,a,()=>e(!r)),T=G(()=>e(!r)),_=Q(()=>e(!r)),w=[{key:"Incidencias",label:"Incidencias",children:t.jsx(x,{columnas:F,rowKey:"incidencia_id",url:V(i),reload:()=>e(!r)})},{key:"Horario",label:"Horario",children:t.jsx(x,{columnas:T,rowKey:"horario_id",url:J(i),reload:()=>e(!r)})},{key:"Pagos",label:"Pagos",children:t.jsx(x,{columnas:_,rowKey:"pago_id",url:X(i),reload:()=>e(!r)})}];return t.jsxs(t.Fragment,{children:[t.jsx(f,{children:"Detalles del Usuario"})," ",t.jsxs(k,{wrap:!0,gap:"large",justify:"space-evenly",align:"flex-start",style:{width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"1rem"},children:[t.jsx(K,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"}}),t.jsx(W,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"},items:w,onChange:g=>{u(g)}})]}),t.jsx(f,{})," ",p==="Incidencias"?t.jsxs(t.Fragment,{children:[t.jsx(q,{tooltip:"Añadir Nueva Incidencia",onClick:()=>c("addI",!0),type:"primary",icon:t.jsx(D,{})}),t.jsx(Z,{openModal:s.updI,closeModal:()=>c("updI",!1),reload:()=>e(!r),values:o}),t.jsx(H,{openModal:s.addI,closeModal:()=>c("addI",!1),reload:()=>e(!r),data:i})]}):null]})};export{Ke as default};
