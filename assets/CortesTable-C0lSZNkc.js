import{e as y,r as o,j as e}from"./index-DnZSuapv.js";import{a as _,g as C,d as k}from"./index-Ct-Inivb.js";import{h as T}from"./Producto-Cd6i44JA.js";import{d as I}from"./Usuario-BLIord41.js";import{F as a}from"./index-eEjfzd7p.js";import{M as F}from"./index-CQoRxuqN.js";import{S as x}from"./index-CAw0ik1A.js";import{T as f}from"./index-ZS8OVZkw.js";import{B as g}from"./button-DxAvYtf7.js";import{P as S}from"./index-BRImeMB9.js";import{F as v}from"./Table-UylViyS0.js";import{F as E}from"./index-CRStyn0e.js";import"./index-OoAlQgr1.js";import"./EllipsisOutlined-BC2kcC9O.js";import"./useMergedState-xnIRtK6W.js";import"./useSize-DL9WfM8p.js";import"./ContextIsolator-X51Zuf7C.js";import"./apiClient-DNqqoRi2.js";import"./index-BLOaBrrf.js";import"./Skeleton-C8RXkADb.js";import"./index-rbW2pF-2.js";import"./index-DnZuPcqL.js";import"./row-Bgu54Vpq.js";import"./responsiveObserver-P31G7zPC.js";import"./index-CfhjOVlK.js";import"./TextArea-D6coABml.js";import"./EyeOutlined-Dgph3YEA.js";import"./Tienda-DchRzPO6.js";import"./Lote-DgymCvQp.js";import"./moment-64TmN0UP.js";import"./ActionButton-HZPJWirw.js";import"./CheckOutlined-CxFn5oU1.js";import"./DownOutlined-DfCZxesi.js";import"./styleChecker-BPMTEHVB.js";import"./addEventListener-BGVn8IVC.js";import"./index-nq-gG-E2.js";import"./LeftOutlined-DUJeaJ5E.js";import"./index-8gkIUhhz.js";import"./index-BsZC5oSy.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-DvbmuEp_.js";import"./useBreakpoint-CHVb293n.js";const A=({openModal:n,closeModal:r,reload:c})=>{const{id:i}=y(),[l]=a.useForm(),[s,p]=o.useState([]),[h,j]=o.useState([]);return o.useEffect(()=>{T(i,p),I("talleres",j)},[]),e.jsx(F,{getContainer:!1,title:"NUEVOS CORTES",styles:{header:{textAlign:"center"}},open:n,onCancel:()=>r(!1),okText:"Añadir",onOk:l.submit,centered:!0,width:600,children:e.jsxs(a,{style:{margin:"0 auto"},size:"large",form:l,labelAlign:"center",layout:"vertical",onFinish:async t=>{await _(i,t),l.resetFields(),c(),r(!1)},initialValues:{detalles:[{cantidad_enviada:null,talla:null,taller_id:null}]},children:[e.jsx(a.Item,{name:"producto_id",label:"Producto",rules:[{required:!0,message:"Producto es requerido"}],children:e.jsx(x,{placeholder:"Seleccione productos",children:s==null?void 0:s.map(t=>e.jsxs(x.Option,{value:t.producto_id,children:[t.nombre," "]},`producto_${t.producto_id}`))})}),e.jsx(a.List,{name:"detalles",children:(t,{add:u,remove:b})=>e.jsxs(e.Fragment,{children:[t.map(d=>e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(a.Item,{name:[d.name,"cantidad_enviada"],label:"Cantidad Enviada",rules:[{required:!0,message:"Cantidad enviada es requerida"}],children:e.jsx(f,{style:{width:"100%"},min:1})}),e.jsx(a.Item,{name:[d.name,"talla"],label:"Talla",rules:[{required:!0,message:"Talla es requerida"}],children:e.jsx(f,{style:{width:"100%"}})}),e.jsx(a.Item,{name:[d.name,"taller_id"],label:"Taller",children:e.jsx(x,{placeholder:"Seleccione el taller",children:h.map(m=>e.jsxs(x.Option,{value:m.trabajador_id,children:[`${m.nombre} ${m.ap_paterno} ${m.ap_materno}`," "]},`taller_${m.trabajador_id}`))})}),e.jsx(g,{type:"danger",onClick:()=>b(d.name),children:"Eliminar"})]},d.key)),e.jsx(a.Item,{children:e.jsx(g,{type:"dashed",onClick:()=>u(),block:!0,children:"Agregar Detalle"})})]})})]})})},ye=({status:n,reload:r})=>{const{id:c}=y(),[i,l]=o.useState([]),[s,p]=o.useState(!1);o.useEffect(()=>{C(c,l)},[c,n,r]);const h=i.some(t=>t.estado===1),j=[{key:"taller",dataIndex:"taller",title:"Taller",align:"center"},{key:"producto",dataIndex:"producto",title:"Producto",align:"center"},{key:"cantidad_enviada",dataIndex:"cantidad_enviada",title:"Cantidad Enviada",align:"center"},...i.some(t=>t.estado===3)?[{key:"cantidad_recibida",dataIndex:"cantidad_recibida",title:"Cantidad Recibida",align:"center"}]:[],{key:"talla",dataIndex:"talla",title:"Talla",align:"center"},...h?[{title:"Opciones",key:"opciones",align:"center",render:(t,u)=>e.jsx(S,{title:"Eliminar",description:"¿Desea eliminar este corte?",okText:"Confirmar",cancelText:"No",onConfirm:()=>{k(u.corte_id,u.estado),r()},children:e.jsx(g,{block:!0,style:{background:"#f54242",color:"white"},danger:!0,children:"Eliminar"})})}]:[]];return e.jsxs(e.Fragment,{children:[e.jsx(v,{scroll:{x:"min-content"},dataSource:i,columns:j,rowKey:"corte_id"}),n===0||n===1?e.jsxs(e.Fragment,{children:[e.jsx(E,{style:{insetInlineStart:270},onClick:()=>p(!0),tooltip:"Añadir Corte"}),e.jsx(A,{openModal:s,closeModal:()=>p(!1),reload:r})]}):null]})};export{ye as default};
