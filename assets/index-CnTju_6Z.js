import{r as i,j as e,e as I}from"./index-CVbCT0l5.js";import{g as N,a as q}from"./Ventas-Dyy6Lpcg.js";import{F as S}from"./Table-Czjr3Miv.js";import{F as l}from"./index-AB0PUNYF.js";import{M as v}from"./index-C_KmYm4B.js";import{C as b}from"./index-Dsvk128_.js";import{R as j,C as c}from"./row-CzRmizyp.js";import{L as y}from"./index-BXcGyJYz.js";import{D as V}from"./index-Dhe16Acy.js";import{p as x,o as k,a as T,b as D,c as C,d as M,e as A}from"./Tools-BXmtYGau.js";import{a as F}from"./Usuario-DDIOiyoQ.js";import{g as _}from"./Tienda-CgK9HzvW.js";import{I as g}from"./index-CXbtJAhA.js";import{D as K}from"./index-DLneYuss.js";import{S as $}from"./index-BhSnBzJY.js";import"./ApiClient-CULQ52Ii.js";import"./useMergedState-fGtj9LVw.js";import"./useSize-zAnCzYCD.js";import"./styleChecker-DScY0sRB.js";import"./EllipsisOutlined-DlXNZPqD.js";import"./addEventListener-CvtMWzaB.js";import"./DownOutlined-Bi8IMX8W.js";import"./index-CS-4uwXW.js";import"./button-DfgpAk1h.js";import"./ContextIsolator-BDuV7uS_.js";import"./LeftOutlined-DiBxhoT3.js";import"./Dropdown-D-1DQADy.js";import"./index-L4NGzRYx.js";import"./responsiveObserver-CLScrf4w.js";import"./index-DC-dasep.js";import"./index-tbJP58fR.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-B3cXvMnm.js";import"./useBreakpoint-BGM5iO-x.js";import"./TextArea-Cl1KOnKG.js";import"./ActionButton-CywvW73d.js";import"./Skeleton-CXWlOTf-.js";import"./index-Bkui5ax7.js";import"./moment-COTGZkLr.js";import"./EyeOutlined-BxNeC4-a.js";import"./CheckOutlined-JcE4lr5y.js";const R=({id:n,data:m})=>{var p;const[r,s]=i.useState([]);i.useEffect(()=>{N(n,s)},[n]);const o=[{title:"Nombre",dataIndex:"nombre",key:"nombre",align:"center"},{title:"Código",dataIndex:"codigo",key:"codigo",align:"center"},{title:"Cantidad",dataIndex:"cantidad",key:"cantidad",align:"center"},{title:"Precio Unitario",dataIndex:"precioUnitario",key:"precioUnitario",align:"center",render:t=>`S/${t}`},{title:"Neto",dataIndex:"precioNeto",key:"precioNeto",align:"center",render:t=>`S/${t}`}];return e.jsx(e.Fragment,{children:e.jsx(S,{scroll:{x:"min-content"},columns:o,dataSource:(p=r==null?void 0:r.detalles)==null?void 0:p.map((t,h)=>({...t,key:h})),rowKey:t=>t.id,bordered:!0})})},Y=({openModal:n,closeModal:m,id:r})=>{const{tipo:s}=I();l.useForm();const[o,p]=i.useState(["detalles"]);return i.useEffect(()=>{N(r,p)},[r]),console.log(s),e.jsx(v,{forceRender:!0,getContainer:!1,title:`${s} ${r}`,open:n,onCancel:m,style:{textTransform:"uppercase"},okText:"Aceptar",cancelText:"Cerrar",onOk:m,centered:!0,width:"800px",children:e.jsxs(b,{style:{textAlign:"center",margin:"auto"},children:[e.jsxs(j,{gutter:24,style:{marginTop:"16px"},children:[e.jsx(c,{span:12,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(b,{style:{width:"100%"},children:e.jsx(y,{itemLayout:"horizontal",dataSource:[{title:o.tienda,value:o.codigo},{title:s==="boleta"?"DNI":"RUC",value:s==="boleta"?o.dni:o.ruc},{title:o.tipoPago,value:`S/${o.totalNeto}`}],renderItem:t=>e.jsxs(y.Item,{children:[e.jsx("b",{children:t.title}),e.jsx("span",{style:{float:"right"},children:t.value})]})})})}),e.jsx(c,{span:12,children:e.jsx(b,{style:{textAlign:"center",margin:"auto"},children:e.jsx(y,{itemLayout:"horizontal",dataSource:[{title:"Cantidad",value:`${o.cantidad_total}`},{title:"Total Bruto",value:`S/${o.totalBruto}`},{title:"IGV",value:`S/${o.totalIgv}`},{title:"Total Neto",value:`S/${o.totalNeto}`}],renderItem:t=>e.jsxs(y.Item,{children:[e.jsx("b",{children:t.title}),e.jsx("span",{style:{float:"right"},children:t.value})]})})})})]}),e.jsx(j,{children:e.jsxs(c,{span:24,children:[e.jsx(V,{}),e.jsx(R,{id:r})," "]})})]})})},L=({openModal:n,closeModal:m,tipoTrabajador:r,reload:s,setReload:o})=>{const{tipoVenta:p}=I(),[t]=l.useForm(),[h,f]=i.useState([]);return i.useEffect(()=>{r==="ventas"&&_(f)},[r,t]),e.jsx(v,{forceRender:!0,getContainer:!1,title:`Añadir nueva ${p}`,open:n,onCancel:()=>m(!1),style:{textTransform:"uppercase"},okText:"Añadir",onOk:t.submit,centered:!0,width:500,children:e.jsxs(l,{autoComplete:"off",style:{maxWidth:500,margin:"0 auto"},size:"large",form:t,layout:"vertical",labelAlign:"center",id:"formulariocrear",onFinish:async u=>{await F(r,u),o(!s),m(!1),t.resetFields()},children:[e.jsx(l.Item,{style:{marginTop:20},name:"nombre",label:"Nombres",rules:[{required:!0,message:"Nombres requeridos"}],children:e.jsx(g,{onPaste:x,onKeyDown:k,onInput:T})}),e.jsxs(j,{gutter:[16,16],children:[e.jsx(c,{span:12,children:e.jsx(l.Item,{name:"ap_paterno",label:"Apellido Paterno",rules:[{required:!0,message:"Apellido Paterno requerido"}],children:e.jsx(g,{onPaste:x,onKeyDown:k,onInput:T})})}),e.jsx(c,{span:12,children:e.jsx(l.Item,{name:"ap_materno",label:"Apellido Materno",rules:[{required:!0,message:"Apellido Materno requerido"}],children:e.jsx(g,{onPaste:x,onKeyDown:k,onInput:T})})})]}),e.jsxs(j,{gutter:[16,16],children:[e.jsx(c,{span:12,children:e.jsx(l.Item,{label:"Fecha Nacimiento",name:"fecha_nacimiento",rules:[{required:!0,message:"Fecha de nacimiento requerida"}],children:e.jsx(K,{placeholder:"YYYY-MM-DD",format:"YYYY-MM-DD"})})}),e.jsx(c,{span:12,children:e.jsx(l.Item,{name:"telefono",label:"Teléfono",rules:[{required:!0,message:"Teléfono requerido"}],children:e.jsx(g,{showCount:!0,maxLength:9,onPaste:x,onKeyDown:D,onInput:C})})})]}),e.jsxs(j,{gutter:[16,16],children:[e.jsx(c,{span:12,children:e.jsx(l.Item,{name:"dni",label:"DNI",rules:[{required:!0,message:"DNI requerido"}],children:e.jsx(g,{showCount:!0,maxLength:8,onPaste:x,onKeyDown:D,onInput:C})})}),e.jsx(c,{span:12,children:e.jsx(l.Item,{name:"sueldo",label:"Sueldo",rules:[{required:!0,message:"Sueldo requerido"}],children:e.jsx(g,{onPaste:x,onKeyDown:M,onInput:A})})})]}),r==="ventas"&&e.jsx(l.Item,{name:"tienda_id",label:"Tienda Asignada",rules:[{required:!0,message:"Tienda requerida"}],children:e.jsx($,{options:h.map(u=>({value:u.tienda_id,label:u.tienda,key:u.tienda_id}))})})]})})},E=()=>{const{tipo:n}=I(),[m,r]=i.useState(1),[s,o]=i.useState([]),[p,t]=i.useState(!1),[h,f]=i.useState(!1),[u,P]=i.useState(!1);i.useEffect(()=>{q(n,o)},[n,u]);const w=[{title:"Nº",dataIndex:"id",key:"id",align:"center"},{title:"Código",dataIndex:"codigo",key:"codigo",align:"center"},{title:"Tipo de Venta",dataIndex:"tipoVenta",key:"tipoVenta",align:"center",sorter:(a,d)=>a.tipoVenta.localeCompare(d.tipoVenta)},{title:"Fecha de Venta",dataIndex:"fecha",key:"fecha",align:"center"},{title:"Cantidad",dataIndex:"cantidad_total",key:"cantidad_total",align:"center",sorter:(a,d)=>a.cantidad_total-d.cantidad_total},{title:"Total Bruto",dataIndex:"totalBruto",key:"totalBruto",align:"center"},{title:"Total Neto",dataIndex:"totalNeto",key:"totalNeto",align:"center",sorter:(a,d)=>a.totalNeto-d.totalNeto},{title:"IGV",dataIndex:"totalIgv",key:"totalIgv",align:"center"},{title:"Tipo de Pago",dataIndex:"tipoPago",key:"tipoPago",align:"center",onCell:a=>({style:{background:a.tipoPago==="Efectivo"?"#248304":a.tipoPago==="Yape"?"#8522a3":"#6fceea",color:a.tipoPago==="Transferencia"?"black":"white"}}),sorter:(a,d)=>a.tipoPago.localeCompare(d.tipoPago)},{title:n==="boleta"?"DNI":"RUC",dataIndex:n==="boleta"?"dni":"ruc",key:n==="boleta"?"dni":"ruc",align:"center"},{title:"Tienda",dataIndex:"tienda",key:"tienda",align:"center"}];return e.jsxs(e.Fragment,{children:[e.jsx(S,{scroll:{x:"min-content"},columns:w,pagination:{pageSize:7},dataSource:s.map((a,d)=>({...a,key:d})),rowKey:a=>a.id,bordered:!0,className:"tabla_trabajadores",onRow:a=>({onClick:()=>{r(a.venta_id),f(!0)},style:{cursor:"pointer"}})}),e.jsx(L,{openModal:p,closeModal:()=>t(!1),tipoTrabajador:n,reload:u,setReload:P}),e.jsx(Y,{openModal:h,closeModal:()=>f(!1),id:m})]})},Pe=()=>{const{tipo:n}=I();return e.jsxs(e.Fragment,{children:[e.jsxs(V,{style:{textTransform:"uppercase"},children:[" ",n," "]}),e.jsx(E,{})]})};export{Pe as default};
