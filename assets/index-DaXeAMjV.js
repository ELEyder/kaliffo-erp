import{e as k,r as l,j as t}from"./index-DnZSuapv.js";import{g as $}from"./Usuario-BLIord41.js";import{g as A,R as D}from"./Reporte-DjNiyq89.js";import{C as R}from"./index-BLOaBrrf.js";import{I as P}from"./index-4tAGHkW4.js";import{L as I}from"./index-BCdAvJOG.js";import{D as y}from"./index-DnZuPcqL.js";import{R as v,C as N}from"./row-Bgu54Vpq.js";import{D as O}from"./Table-UylViyS0.js";import{T as x}from"./Tabla-BwLH4X_R.js";import{a as f}from"./apiClient-DNqqoRi2.js";import{F as S}from"./index-BjGP48R2.js";import{B as m}from"./button-DxAvYtf7.js";import{P as j}from"./index-BRImeMB9.js";import{u as B,A as U}from"./AddIncidenciaModal-DO1AlUcS.js";import{F as d}from"./index-eEjfzd7p.js";import{M as H}from"./index-CQoRxuqN.js";import{I as b}from"./index-CfhjOVlK.js";import{S as C}from"./index-CAw0ik1A.js";import{T as L}from"./index-rbW2pF-2.js";import{F as W}from"./index-CRStyn0e.js";import"./moment-64TmN0UP.js";import"./useSize-DL9WfM8p.js";import"./Skeleton-C8RXkADb.js";import"./EyeOutlined-Dgph3YEA.js";import"./addEventListener-BGVn8IVC.js";import"./useMergedState-xnIRtK6W.js";import"./EllipsisOutlined-BC2kcC9O.js";import"./LeftOutlined-DUJeaJ5E.js";import"./index-OoAlQgr1.js";import"./ContextIsolator-X51Zuf7C.js";import"./responsiveObserver-P31G7zPC.js";import"./useBreakpoint-CHVb293n.js";import"./styleChecker-BPMTEHVB.js";import"./DownOutlined-DfCZxesi.js";import"./index-nq-gG-E2.js";import"./index-8gkIUhhz.js";import"./index-BsZC5oSy.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-DvbmuEp_.js";import"./TextArea-D6coABml.js";import"./ActionButton-HZPJWirw.js";import"./CheckOutlined-CxFn5oU1.js";const q=()=>{const n=[{key:"1",label:"Historico"},{key:"2",label:"Ultimo Mes"}],{id:i}=k(),[e,r]=l.useState([]);l.useEffect(()=>{$(i,r)},[i]);const[a,s]=l.useState(["eyder1.jpg","eyder2.jpg","eyder3.jpg","eyder4.jpg","eyder5.gif"]);return t.jsxs(R,{style:{width:300,textAlign:"center"},title:`${e.nombre} ${e.ap_paterno} ${e.ap_materno}`,cover:t.jsx(P,{width:"100%",height:"auto",src:e.nombre==="Rodrigo"?"/img/usuarios/rodrigo.jpg":e.nombre==="Pablo"?"/img/usuarios/pablo.jpg":e.nombre==="Eyder"?`/img/usuarios/${a[Math.floor(Math.random()*5)]}`:`/img/usuarios/${e.usuario_id}.jpg`,fallback:"/img/usuarios/0.jpg"}),children:[t.jsx(I,{itemLayout:"horizontal",dataSource:[{title:"DNI",value:e.dni},{title:"TELÉFONO",value:e.telefono},{title:"HORAS TRABAJADAS",value:e.total_horas_trabajadas},{title:"NUM. INCIDENCIAS",value:e.total_incidencias},{title:"SALARIO",value:"S/ "+e.sueldo}],renderItem:o=>t.jsxs(I.Item,{children:[t.jsx("b",{style:{textAlign:"left",marginRight:"40px"},children:o.title}),t.jsx("a",{style:{float:"right"},children:o.value})]})}),t.jsx(y,{}),t.jsx(v,{justify:"center",align:"middle",children:t.jsx(N,{children:t.jsx(O.Button,{menu:{items:n,onClick:({key:o})=>A(i,o)},block:!0,size:"large",style:{fontWeight:"bold"},children:"OBTENER REPORTE"})})})]})},z=(n,i,e)=>{const r=[{title:"N°",dataIndex:"id",key:"id",align:"center",render:(a,s,o)=>o+1},{title:"Incidencia",dataIndex:"tipo",key:"tipo",align:"center",render:a=>({1:"Familiar",2:"Salud",3:"Personal"})[a]||"Desconocido",onCell:a=>({style:{background:a.tipo===1?"#FCFB77":a.tipo===2?"orange":"#f54242",color:a.tipo===3?"white":"black",padding:"10px"}})},{title:"Descripción",dataIndex:"descripcion",key:"descripcion",align:"center"},{title:"Fecha",dataIndex:"fecha",key:"fecha",align:"center",render:a=>{if(!a)return"-";const s=new Date(a),o=String(s.getDate()).padStart(2,"0"),p=String(s.getMonth()+1).padStart(2,"0"),u=s.getFullYear();return`${o}/${p}/${u}`}}];return r.push({title:"Opciones",key:"opciones",align:"center",render:a=>t.jsxs(S,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:[t.jsx(m,{type:"primary",block:!0,onClick:()=>{i(a),n("updI",!0)},children:"Editar"}),t.jsx(j,{title:"¿Estás seguro de que deseas eliminar esta incidencia?",okText:"Confirmar",cancelText:"Cancelar",onConfirm:async()=>{await f.delete(`/incidencia/delete/${a.incidencia_id}`),e()},children:t.jsx(m,{block:!0,style:{background:"#f54242",color:"white"},danger:!0,children:"Eliminar"})})]})}),r},K=n=>`/incidencia?usuario_id=${n}`,Y=n=>{const i=[{title:"Fecha",dataIndex:"fecha",key:"fecha",align:"center",sorter:{compare:(e,r)=>e.fecha.localeCompare(r.fecha),multiple:2},render:e=>{if(!e)return"-";const r=new Date(e),a=String(r.getDate()).padStart(2,"0"),s=String(r.getMonth()+1).padStart(2,"0"),o=r.getFullYear();return`${a}/${s}/${o}`}},{title:"Hora de Ingreso",dataIndex:"hora_entrada",key:"hora_entrada",align:"center"},{title:"Hora de Salida",dataIndex:"hora_salida",key:"hora_salida",align:"center"},{title:"Horas Trabajadas",dataIndex:"horas_trabajadas",key:"horas_trabajadas",align:"center",onCell:e=>({style:{background:e.min_trabajadas>=540?"green":e.min_trabajadas<=300?"#f54242":"#FCFB77",color:e.min_trabajadas<=300?"white":"black"}})}];return i.push({title:"Opciones",dataIndex:"horario_id",key:"opciones",align:"center",render:e=>t.jsx(j,{title:"ELIMINAR",description:"DESEA ELIMINAR A",okText:"Confirmar",cancelText:"NO",onConfirm:async()=>{await f.delete(`/asistencia/delete/${e}`),n()},children:t.jsx(m,{block:!0,type:"primary",danger:!0,children:"Eliminar"})})}),i},V=n=>`/asistencia?usuario_id=${n}`,G=n=>{const i=[{title:"Monto Pagado",dataIndex:"montoPagado",key:"montoPagado",align:"center",render:e=>"S/"+e},{title:"Monto Faltante",dataIndex:"montoFaltante",key:"montoFaltante",align:"center",render:e=>"S/"+e},{title:"Fecha",dataIndex:"fecha",key:"fecha",align:"center",render:e=>{if(!e)return"-";const r=new Date(e),a=String(r.getDate()).padStart(2,"0"),s=String(r.getMonth()+1).padStart(2,"0"),o=r.getFullYear();return`${a}/${s}/${o}`}},{title:"Estado",dataIndex:"estado",key:"estado",align:"center",render:e=>({0:"Pagado",1:"Pendiente"})[e]||"Desconocido",onCell:e=>({style:{background:e.estado==="En Proceso"?"#FCFB77":"green",color:e.estado==="En Proceso"?"black":"white"}}),sorter:{compare:(e,r)=>e.estado.localeCompare(r.estado),multiple:1}}];return i.push({title:"Opciones",dataIndex:"pago_id",key:"opciones",align:"center",render:e=>t.jsxs(j,{title:"¿ELIMINAR?",description:"¿Está seguro de eliminar el pago?",okText:"Confirmar",cancelText:"Cancelar",onConfirm:async()=>{await f.delete(`/pago/delete/${e}`),n()},children:[t.jsx(m,{style:{background:"#f54242",color:"white"},danger:!0,children:"Eliminar"})," "]})}),i},J=n=>`/pago/${n}`,{Option:h}=C,Q=({openModal:n,closeModal:i,reload:e,values:r})=>{const[a]=d.useForm();return l.useEffect(()=>{a.setFieldsValue({descripcion:r.descripcion,tipo:r.tipo})},[r]),t.jsx(H,{forceRender:!0,getContainer:!1,title:"Editar Incidencia",open:n,onCancel:i,okText:"Guardar",onOk:a.submit,style:{textTransform:"uppercase"},centered:!0,width:500,children:t.jsxs(d,{style:{maxWidth:500,margin:"0 auto"},size:"large",form:a,layout:"vertical",labelAlign:"center",id:"formularioeditar",onFinish:async()=>{await B(r.incidencia_id,a.getFieldsValue()),e(),i()},children:[t.jsx(d.Item,{style:{marginTop:20},name:"descripcion",label:"Descripción",rules:[{required:!0,message:"Descripción requerida"}],children:t.jsx(b,{})}),t.jsx(d.Item,{style:{marginTop:20},name:"tipo",label:"Tipo",rules:[{required:!0,message:"Tipo requerido"}],children:t.jsxs(C,{placeholder:"Selecciona una opción",children:[t.jsx(h,{value:1,children:"Familiar"}),t.jsx(h,{value:2,children:"Salud"}),t.jsx(h,{value:3,children:"Personal"})]})}),t.jsx(d.Item,{name:"usuario_id",noStyle:!0,children:t.jsx(b,{type:"hidden"})})]})})},He=()=>{const{id:n}=k(),[i,e]=l.useState(!0),[r,a]=l.useState(!0),[s,o]=l.useState({addI:!1,updI:!1}),[p,u]=l.useState("Incidencias"),c=(g,M)=>{o(w=>({...w,[g]:M}))},F=z(c,a,()=>e(!i)),_=Y(()=>e(!i)),E=G(()=>e(!i)),T=[{key:"Incidencias",label:"Incidencias",children:t.jsx(x,{columnas:F,rowKey:"incidencia_id",url:K(n),reload:()=>e(!i)})},{key:"Horario",label:"Horario",children:t.jsx(x,{columnas:_,rowKey:"horario_id",url:V(n),reload:()=>e(!i)})},{key:"Pagos",label:"Pagos",children:t.jsx(x,{columnas:E,rowKey:"pago_id",url:J(n),reload:()=>e(!i)})}];return t.jsxs(t.Fragment,{children:[t.jsx(y,{children:"Detalles del Usuario"})," ",t.jsxs(S,{wrap:!0,gap:"large",justify:"space-evenly",align:"flex-start",style:{width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"1rem"},children:[t.jsx(q,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"}}),t.jsx(L,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"},items:T,onChange:g=>{u(g)}})]}),t.jsx(y,{})," ",p==="Incidencias"?t.jsxs(t.Fragment,{children:[t.jsx(W,{tooltip:"Añadir Nueva Incidencia",onClick:()=>c("addI",!0),type:"primary",icon:t.jsx(D,{})}),t.jsx(Q,{openModal:s.updI,closeModal:()=>c("updI",!1),reload:()=>e(!i),values:r}),t.jsx(U,{openModal:s.addI,closeModal:()=>c("addI",!1),reload:()=>e(!i),id:n})]}):null]})};export{He as default};
