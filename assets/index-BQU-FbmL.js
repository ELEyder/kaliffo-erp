import{j as e,r as l,L as A}from"./index-D5MhwzjO.js";import{a as O,d as R,s as E,u as F,g as k}from"./Producto-BYzNbulg.js";import{F as o}from"./index-DVJIl6I9.js";import{M as f}from"./index-CYfPMOno.js";import{I as h}from"./index-CfRsS-7T.js";import{R as y,C as m}from"./row-D3nIh8vm.js";import{T as p}from"./index-KjlJyLl6.js";import{F as q}from"./index-3FBCm-hr.js";import{C}from"./index-BHNMf-Ox.js";import{T as x}from"./index-CmQVxU_y.js";import{R as D}from"./EditOutlined-8HL3FklK.js";import{R as M}from"./EyeOutlined-DUFArE4t.js";import{P as S}from"./index-C9R6pYBa.js";import{R as N}from"./DeleteOutlined-D7f0p-OW.js";import{I as B}from"./index-D2WPZPp1.js";import{F as $}from"./index-BfQYJXJj.js";import{D as U}from"./index-DPCJsCyH.js";import"./ApiClient-CULQ52Ii.js";import"./ContextIsolator-Db01Mp-B.js";import"./useSize-DtBCnSoW.js";import"./button-A47PWn8y.js";import"./EllipsisOutlined-HmlbpjMm.js";import"./useMergedState-CT3y2AoZ.js";import"./responsiveObserver-ClSOMJ9W.js";import"./ActionButton-CpjJvezN.js";import"./Skeleton-CxzTwDeq.js";import"./TextArea-CdJNamXB.js";import"./DownOutlined-DXPYBfMJ.js";import"./gapSize-U1swVQyS.js";import"./index-F-Te-_IQ.js";import"./Dropdown-DyJ6tLAZ.js";import"./addEventListener-vrbAq2BU.js";import"./LeftOutlined-CJ3P21Yz.js";import"./scrollTo-BiS3UebB.js";const L=({openModal:n,closeModal:s,reload:a})=>{const[i]=o.useForm();return e.jsx(f,{getContainer:!1,styles:{header:{textAlign:"center"}},title:"NUEVO PRODUCTO",open:n,onCancel:s,okText:"A単adir",onOk:i.submit,centered:!0,width:400,children:e.jsxs(o,{style:{margin:"0 auto"},size:"large",form:i,labelAlign:"center",id:"formulariocrear",layout:"vertical",onFinish:async r=>{await O(r),i.resetFields(),a(),s()},children:[e.jsx(o.Item,{style:{marginTop:20},name:"nombre",label:"Nombre del Producto",rules:[{required:!0,message:"Nombre requerido"}],children:e.jsx(h,{})}),e.jsxs(y,{gutter:16,children:[" ",e.jsx(m,{span:12,children:e.jsx(o.Item,{name:"precioBase",label:"Precio Base",rules:[{type:"number",required:!0,message:"Precio requerido"}],children:e.jsx(p,{min:1,formatter:r=>`S/. ${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r==null?void 0:r.replace(/S\/.\s?|,/g,""),style:{width:"100%"}})})}),e.jsx(m,{span:12,children:e.jsx(o.Item,{name:"descuento",label:"Descuento",rules:[{type:"number",required:!0,message:"Descuento requerido"}],children:e.jsx(p,{formatter:r=>`${r}%`,parser:r=>r==null?void 0:r.replace("%",""),min:1,max:40,style:{width:"100%"}})})})]})]})})},z=({openModal:n,closeModal:s,id:a,reload:i})=>{const[r]=o.useForm();return e.jsx(f,{forceRender:!0,getContainer:!1,title:"Eliminar Producto",open:n,onCancel:s,style:{textTransform:"uppercase"},onOk:r.submit,okText:"Eliminar",okButtonProps:{style:{backgroundColor:"red",borderColor:"red"}},centered:!0,width:500,children:e.jsx(o,{style:{maxWidth:500,margin:"0 auto"},size:"large",form:r,layout:"vertical",labelAlign:"center",id:"deleteProductoModal",onFinish:async t=>{await R(a,t),s(),i()},children:e.jsx(o.Item,{name:"campo",label:"Escribe ACEPTO para continuar",rules:[{required:!0,message:"Campo requerido"}],children:e.jsx(h,{})})})})},_=({openModal:n,closeModal:s,id:a,reload:i})=>{const[r]=o.useForm();return l.useEffect(()=>{E(a,r)},[a,i]),e.jsx(f,{forceRender:!0,getContainer:!1,styles:{header:{textAlign:"center"}},title:"ACTUALIZAR PRODUCTO",open:n,onCancel:()=>s(!1),okText:"A単adir",onOk:r.submit,centered:!0,width:400,children:e.jsxs(o,{style:{margin:"0 auto"},size:"large",form:r,labelAlign:"center",id:"formulariocrear",layout:"vertical",onFinish:async t=>{await F(a,t),r.resetFields(),i(),s(!1)},children:[e.jsx(o.Item,{style:{marginTop:20},name:"nombre",label:"Nombre del Producto",rules:[{required:!0,message:"Nombre requerido"}],children:e.jsx(h,{})}),e.jsxs(y,{gutter:16,children:[e.jsx(m,{span:12,children:e.jsx(o.Item,{name:"precioBase",label:"Precio Base",rules:[{required:!0,message:"Precio requerido"}],children:e.jsx(p,{formatter:t=>`S/. ${t||""}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:t=>t==null?void 0:t.replace(/[^\d.-]/g,""),style:{width:"100%"}})})}),e.jsx(m,{span:12,children:e.jsx(o.Item,{name:"descuento",label:"Descuento",rules:[{type:"number",required:!0,message:"Descuento requerido"}],children:e.jsx(p,{formatter:t=>`${t}%`,parser:t=>t==null?void 0:t.replace("%",""),min:1,max:40,style:{width:"100%"}})})})]})]})})},{Meta:b}=C,V=()=>{const[n,s]=l.useState(0),[a,i]=l.useState([]),[r,t]=l.useState(!1),[I,j]=l.useState(!1),[w,g]=l.useState(!1),[c,u]=l.useState(!1);return l.useEffect(()=>{k(i)},[c]),e.jsxs(e.Fragment,{children:[e.jsx(q,{wrap:!0,gap:"middle",justify:"space-evenly",gutter:20,children:a.map((d,T)=>e.jsxs(C,{style:{width:"300px",overflow:"hidden"},title:d.nombre,actions:[e.jsx(x,{title:"Editar Producto",className:"card-update",onClick:P=>{s(d.producto_id),j(!0)},children:e.jsx(D,{color:"white"},"edit")}),e.jsx(x,{title:"Ver Detalles",className:"card-view",children:e.jsx(A,{to:`/productos/${d.producto_id}`,children:e.jsx(M,{style:{color:"white"}},"view")})}),e.jsx(S,{title:"ELIMINAR",description:"多DESEA ELIMINAR ESTE PRODUCTO?",placement:"bottom",okText:"Confirmar",onConfirm:P=>{P.stopPropagation(),s(d.producto_id),g(!0)},cancelText:"NO",children:e.jsx(x,{title:"Eliminar Producto",className:"card-delete",children:e.jsx(N,{style:{color:"white"}},"delete")})})],cover:e.jsx(B,{width:"100%",height:"auto",src:`img/productos/${d.producto_id}.png`,fallback:"https://i.pinimg.com/736x/a1/cd/44/a1cd44f6617beebb9794877ef59082a1.jpg"}),children:[e.jsx(b,{style:{textAlign:"center",fontSize:"20px"},title:`Precio: S/${d.precioBase}`}),e.jsx(b,{style:{textAlign:"center",fontWeight:"bold"},title:`Stock general: ${d.stockTotal}`})]},T))}),e.jsx($,{tooltip:"A単adir Producto",onClick:()=>t(!0)}),e.jsx(L,{openModal:r,closeModal:()=>t(!1),reload:()=>u(!c)}),e.jsx(_,{openModal:I,closeModal:()=>j(!1),id:n,reload:()=>u(!c)}),e.jsx(z,{openModal:w,closeModal:()=>g(!1),id:n,reload:()=>u(!c)})]})},we=()=>e.jsxs(e.Fragment,{children:[e.jsx(U,{style:{textTransform:"uppercase"},children:"Productos"}),e.jsx(V,{})]});export{we as default};
