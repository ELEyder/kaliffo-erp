import{e as k,r as s,j as e,L as E}from"./index-VOe2vgqy.js";import{b as N}from"./Tienda-DnH4FuDy.js";import{a as R,R as v}from"./Reporte-CkherWWd.js";import{C as V}from"./index-CbSnFLG8.js";import{B as p}from"./button-BkK1HIrY.js";import{L as h}from"./index-CFgj2cAQ.js";import{T as D}from"./index-MbbRLu9s.js";import{P as $}from"./ProductoDetalleModal-zASr4LrD.js";import{a as j}from"./ApiClient-DPIxiZ71.js";import{T as g}from"./Tabla-BjzZSOcv.js";import{F as y}from"./index-D27eMH57.js";import{P as T}from"./index-B_8r9YOD.js";import{U as B}from"./UpdateTrabajadorModal-B_YbWu94.js";import{b as O,u as F}from"./Usuario-iB7HlP0j.js";import{F as f}from"./index-CC7smcAL.js";import{M as L}from"./index-Bx1_JYha.js";import{S as _}from"./index-MILUAy1A.js";import{D as M}from"./index-BK0r8Jws.js";import{T as U}from"./index-DgHYd8On.js";import{F as G}from"./index-Ct8Rupll.js";import"./useSize-C1OhOW7A.js";import"./Skeleton-CmZq7VAa.js";import"./Table-CoBWn75K.js";import"./useMergedState-BLg108Rf.js";import"./styleChecker-BQJ6aNOb.js";import"./EllipsisOutlined-Dvj6DMPu.js";import"./addEventListener-D7hb8XRL.js";import"./DownOutlined-qBagt-Zf.js";import"./index-BQKuC8hm.js";import"./ContextIsolator-BCW6I3vM.js";import"./LeftOutlined-DEy4OodB.js";import"./Dropdown-C9Rkt24_.js";import"./index-CpO96mgP.js";import"./responsiveObserver-NkQ2BBL7.js";import"./index-tZJnd_qH.js";import"./index-UuGXIqas.js";import"./gapSize-U1swVQyS.js";import"./scrollTo-aC46Fzqo.js";import"./useBreakpoint-C3lN_Zix.js";import"./TextArea-YowM3xaT.js";import"./index-DN4pQfum.js";import"./EyeOutlined-CS0JsWFM.js";import"./row-B9VIZwhG.js";import"./EditOutlined-_LseL3yE.js";import"./CheckOutlined-DNK-T4Ox.js";import"./Producto-aVoRwkLl.js";import"./ActionButton-CE2oHsTL.js";import"./moment-C0VIUrQK.js";import"./Tools-BXmtYGau.js";import"./index-RW91wgR1.js";const{Paragraph:W,Text:Je}=D,K=()=>{const{id:a}=k(),[o,n]=s.useState([]);return s.useEffect(()=>{N(a,n)},[a]),e.jsx(V,{style:{width:400,textAlign:"center"},title:o.tienda,actions:[e.jsx(p,{onClick:()=>R(a),type:"primary",block:!0,style:{fontWeight:"bold"},children:"OBTENER REPORTE"})],children:e.jsx(h,{itemLayout:"horizontal",dataSource:[{title:"DIRECCIÓN",value:o.direccion==null?"0":`${o.direccion}`},{title:"TELÉFONO",value:o.telefono==null?"0":`${o.telefono}`},{title:"STOCK TOTAL",value:o.total_stock==null?"0":`${o.total_stock}`},{title:"VENTAS TOTALES",value:o.ventas==null?"0":`${o.ventas}`},{title:"PERSONAL ASIGNADO",value:`${o.total_usuarios}`}],renderItem:r=>e.jsx(h.Item,{children:e.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:[e.jsxs("strong",{children:[r.title,":"]}),e.jsx(W,{copyable:!0,children:r.value})]})})})})},q=(a,o,n)=>[{title:"Nombre",key:"nombre",render:t=>`${t.nombre} ${t.ap_paterno} ${t.ap_materno}`},{title:"DNI",dataIndex:"dni"},{title:"Teléfono",dataIndex:"telefono"},{title:"Opciones",render:t=>e.jsxs(y,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:[e.jsx(p,{type:"primary",onClick:l=>{l.stopPropagation(),o(t),a("updT",!0)},children:"Editar"}),e.jsx(T,{title:"ELIMINAR",description:"DESEA ELIMINAR A",okText:"Confirmar",cancelText:"NO",onConfirm:async l=>{l.stopPropagation(),await j.delete(`/trabajador/delete/${t.trabajador_id}`),n()},children:e.jsx(p,{style:{background:"#f54242",color:"white"},danger:!0,onClick:l=>l.stopPropagation(),children:"Eliminar"})})]})}],z=a=>`Trabajador?tienda_id=${a}`,H=a=>[{title:"Nº",dataIndex:"id",key:"id",align:"center"},{title:"Código",dataIndex:"codigo",key:"codigo",align:"center"},{title:"Tipo de Venta",dataIndex:"tipo",key:"tipo",align:"center"},{title:"Fecha de Venta",dataIndex:"fechaVenta",key:"fechaVenta",align:"center"},{title:"Cantidad",dataIndex:"cantidad",key:"cantidad",align:"center"},{title:"Total Bruto",dataIndex:"totalBruto",key:"totalBruto",align:"center"},{title:"Total Neto",dataIndex:"totalNeto",key:"totalNeto",align:"center"},{title:"IGV",dataIndex:"IGV",key:"IGV",align:"center"},{title:"Tipo de Pago",dataIndex:"tipoPago",key:"tipoPago",align:"center"},{title:"RUC",dataIndex:"RUC",key:"RUC",align:"center"},{title:"Tienda",dataIndex:"tiendaId",key:"tiendaId",align:"center"},{title:"Opciones",dataIndex:"codigo",key:"opciones",align:"center",render:n=>e.jsx(y,{gap:"small",justify:"center",align:"middle",wrap:"wrap",children:e.jsx(T,{title:"ANULAR",description:"¿DESEA ANULAR ESTA VENTA?",okText:"Confirmar",onConfirm:async r=>{r.stopPropagation(),await j.delete(`/trabajador/delete/${n}`),a()},cancelText:"NO",children:e.jsx(p,{block:!0,style:{background:"#f54242",color:"white"},danger:!0,onClick:r=>r.stopPropagation(),children:"Anular"})})})}],J=()=>[{id:3,codigo:3,tipo:1,fechaVenta:"2024-09-12",cantidad:2,totalBruto:2,totalNeto:2,IGV:2,tipoPago:"Tarjeta de crédito",RUC:1231234123,tiendaId:123145143},{id:4,codigo:4,tipo:1,fechaVenta:"2024-09-12",cantidad:2,totalBruto:2,totalNeto:2,IGV:2,tipoPago:"Tarjeta de crédito",RUC:123145143,tiendaId:123145143}],Q=(a,o,n)=>[{title:"Producto",key:"nombre",dataIndex:"nombre",align:"center"},{title:"Stock",key:"stock",align:"center",dataIndex:"stock",defaultSortOrder:"ascend",onCell:t=>({style:{background:t.stock>=50?"green":t.stock<=20?"#f54242":"#FCFB77",color:t.stock<=20||t.stock>=50?"white":"black",padding:"10px"}})},{title:"Precio",key:"precioBase",dataIndex:"precioBase",align:"center",render:t=>`S/ ${t}`},{title:"Descuento",dataIndex:"descuento",key:"descuento",align:"center",render:t=>`${t}%`,onCell:t=>({style:{background:t.descuento<=10?"green":t.descuento>=20?"#f54242":"#FCFB77",color:t.descuento<=10||t.descuento>=20?"white":"black",padding:"10px"}})},{title:"Ver más",dataIndex:"producto_id",key:"vermas",align:"center",render:(t,l)=>e.jsx(p,{type:"primary",block:!0,onClick:()=>{o(t),a("proD",!0)},children:"+"})}],X=a=>`producto?tienda_id=${a}`,Y=({openModal:a,closeModal:o,id:n,reload:r})=>{const[t]=f.useForm(),[l,m]=s.useState([]);return s.useEffect(()=>{O(n,m)},[n]),e.jsxs(L,{forceRender:!0,getContainer:!1,title:"Añadir nuevo personal",open:a,onCancel:o,style:{textTransform:"uppercase"},onOk:t.submit,okText:"Guardar",centered:!0,width:500,children:[e.jsx(f,{style:{maxWidth:500,margin:"0 auto"},size:"large",form:t,layout:"vertical",labelAlign:"center",id:"formulariaddpersonal",onFinish:async i=>{await F(n,i),r(),o()},children:e.jsx(f.Item,{style:{marginTop:20},name:"personal",label:"Personal",rules:[{required:!0,message:"Personal Requerido"}],children:e.jsx(_,{showSearch:!0,placeholder:"Seleccionar Un personal",filterOption:(i,c)=>((c==null?void 0:c.label)??"").toLowerCase().includes(i.toLowerCase()),options:l.map(i=>({value:i.trabajador_id,label:i.nombre+" "+i.ap_paterno+" "+i.ap_materno,key:i.trabajador_id}))})})}),e.jsx(E,{to:"/trabajadores/tipo/ventas",style:{textDecoration:"none"},children:"¿Trabajador Nuevo? "})]})},Qe=()=>{const{id:a}=k(),[o,n]=s.useState(1),[r,t]=s.useState(!0),[l,m]=s.useState([]),[i,c]=s.useState("none"),[u,I]=s.useState({updT:!1,addP:!1,proD:!1}),d=(x,S)=>{I(A=>({...A,[x]:S}))},b=Q(d,m),C=q(d,m,()=>t(!r)),P=H(d),w=[{key:"1",label:"Productos",children:e.jsx(g,{columnas:b,rowKey:"producto_id",url:X(a),reload:()=>t(!r)})},{key:"2",label:"Personal",children:e.jsx(g,{columnas:C,rowKey:"trabajador_id",url:z(a),reload:()=>t(!r)})},{key:"3",label:"Ventas",children:e.jsx(g,{columnas:P,rowKey:"codigo",dataSource:J(),reload:()=>t(!r)})}];return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:"Detalles de la Tienda"}),e.jsxs(y,{wrap:!0,gap:"large",justify:"space-evenly",align:"flex-start",style:{width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"1rem"},children:[e.jsx(K,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"}}),e.jsx(U,{style:{flex:"1 1 45%",minWidth:"400px",maxWidth:"700px"},items:w,onChange:x=>{x=="2"?c("block"):c("none")}})]}),e.jsx(G,{tooltip:"Añadir Nuevo Personal",onClick:()=>d("addP",!0),type:"primary",style:{display:i},icon:e.jsx(v,{})}),e.jsx(B,{openModal:u.updT,closeModal:()=>d("updT",!1),data:l,reload:()=>t(!r)}),e.jsx(Y,{openModal:u.addP,closeModal:()=>d("addP",!1),id:a,reload:()=>t(!r)}),e.jsx($,{openModal:u.proD,closeModal:()=>d("proD",!1),id:a,idp:o})]})};export{Qe as default};
